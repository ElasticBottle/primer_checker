{"version":3,"sources":["../webpack/bootstrap","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","components/util.js","pages/results/dataFilter.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","_arrayLikeToArray","arr","len","length","arr2","Array","_unsupportedIterableToArray","minLen","toString","slice","constructor","from","test","_toConsumableArray","isArray","iter","iterator","TypeError","_createForOfIteratorHelper","F","done","e","_e","f","it","err","normalCompletion","didErr","step","next","_e2","_slicedToArray","_arr","_n","_d","undefined","_s","_i","push","addName","primer","dataFilter","timeFrameBrush","primers","pType","countries","miss","miss3","match","isWithinTimeFrame","isPrimer","isPType","isCountry","isMiss","isMiss3","isMatch","currDate","Date","date","startDate","endDate","getTime","includes","type","map","val","label","country_name","misses","misses3","match_pct","filterTable","baseTableData","filter","addObject","obj1","obj2","initialSum","results","keys","subObject","getCountriesTotal","dbCount","total","reduce","prevVal","country","getTotalSubmission","dbDaily","dbCum","dateRange","countryAsTotal","useCum","lookBack","separate","result","dates","now","start","end","setDate","getDate","nowStr","toISOString","dateWindowCum","JSON","parse","stringify","dateStr","prevStr","toRemove","getRangeDbCount","combineData","data1","data2","mutation_abs","m3","mutation3_abs","mutation3_pct","submission_count","mutation_pct","countries_considered","accumulate","data","buildLineGraphData","toPlot","totalSubmission","filteredData","currVal","add","virus_name","Set","size","getLineGraphData","baseData","find","getCombinedLineData","makeBarData","graphOverview","daysBetweenComparison","numberOfBars","dateDetails","primerMutations","details","findIntersection","list1","list2","intersect","set","item","has","makeIntersection","tableData","primerNames","intersection","join","itemList","findListIntersection","values"],"mappings":"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","file":"46480a59d90f7b5e8391.worker.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"https://mendel3.bii.a-star.edu.sg/METHODS/corona/gamma/primer/build/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","export default function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}","import arrayLikeToArray from \"./arrayLikeToArray\";\nexport default function _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(n);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}","import arrayWithoutHoles from \"./arrayWithoutHoles\";\nimport iterableToArray from \"./iterableToArray\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray\";\nimport nonIterableSpread from \"./nonIterableSpread\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}","import arrayLikeToArray from \"./arrayLikeToArray\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import unsupportedIterableToArray from \"./unsupportedIterableToArray\";\nexport default function _createForOfIteratorHelper(o) {\n  if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) {\n    if (Array.isArray(o) || (o = unsupportedIterableToArray(o))) {\n      var i = 0;\n\n      var F = function F() {};\n\n      return {\n        s: F,\n        n: function n() {\n          if (i >= o.length) return {\n            done: true\n          };\n          return {\n            done: false,\n            value: o[i++]\n          };\n        },\n        e: function e(_e) {\n          throw _e;\n        },\n        f: F\n      };\n    }\n\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  var it,\n      normalCompletion = true,\n      didErr = false,\n      err;\n  return {\n    s: function s() {\n      it = o[Symbol.iterator]();\n    },\n    n: function n() {\n      var step = it.next();\n      normalCompletion = step.done;\n      return step;\n    },\n    e: function e(_e2) {\n      didErr = true;\n      err = _e2;\n    },\n    f: function f() {\n      try {\n        if (!normalCompletion && it[\"return\"] != null) it[\"return\"]();\n      } finally {\n        if (didErr) throw err;\n      }\n    }\n  };\n}","import arrayWithHoles from \"./arrayWithHoles\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray\";\nimport nonIterableRest from \"./nonIterableRest\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","export const validateFormat = (content) => {\r\n  let format = /^(>fwd|>rev|>prb)[\\s\\S]{1,2}[ACGTacgt]+[\\s\\S]{1,2}(>fwd|>rev|>prb)[\\s\\S]{1,2}[ACGTacgt]+[\\s\\S]{1,2}(>fwd|>rev|>prb)[\\s\\S]{1,2}[ACGTacgt]+[\\s\\S]{1,2}$/;\r\n  let correct_format = format.exec(content);\r\n  return correct_format !== null;\r\n};\r\n\r\nexport const getRandomInt = (min, max) => {\r\n  const lower_r = Math.floor(min);\r\n  const upper_r = Math.floor(max);\r\n  return Math.floor(lower_r + Math.random() * (upper_r - lower_r));\r\n};\r\n\r\n// credit: https://davidwalsh.name/function-debounce\r\n// Returns a function, that, as long as it continues to be invoked, will not\r\n// be triggered. The function will be called after it stops being called for\r\n// N milliseconds. If `immediate` is passed, trigger the function on the\r\n// leading edge, instead of the trailing.\r\nexport function debounce(func, wait, immediate) {\r\n  let timeout;\r\n  return function () {\r\n    let context = this,\r\n      args = arguments;\r\n    let later = function () {\r\n      timeout = null;\r\n      if (!immediate) func.apply(context, args);\r\n    };\r\n    let callNow = immediate && !timeout;\r\n    clearTimeout(timeout);\r\n    timeout = setTimeout(later, wait);\r\n    if (callNow) func.apply(context, args);\r\n  };\r\n}\r\n\r\nexport function addName(primer) {\r\n  /**\r\n   * An annealing function that takes an object and adds [primer] to it with key under \"primer\"\r\n   * @param {string} primer: value to be added\r\n   * @returns {function} a function that takes in [value] and returns it after adding [primer] to it.\r\n   */\r\n  return (value) => {\r\n    value.primer = primer;\r\n    return value;\r\n  };\r\n}\r\n\r\nexport function makeBaseGraphData(baseData) {\r\n  /**\r\n   * Converts the incoming {primerName: Missed virus} to\r\n   * {primerName: Date: Missed Virus}\r\n   *\r\n   * @param {Object} baseData: contains the primerDetails\r\n   * @returns {Object}: Mapping from {primerName: Date: Missed Virus}\r\n   */\r\n\r\n  const toReturn = {};\r\n  for (const primerName of Object.keys(baseData)) {\r\n    const result = {};\r\n    for (const details of baseData[primerName]) {\r\n      const toAdd = result[details.date] || [];\r\n      toAdd.push(addName(primerName)(details));\r\n      result[details.date] = toAdd;\r\n    }\r\n    toReturn[primerName] = result;\r\n  }\r\n  return toReturn;\r\n}\r\n","import { addName } from \"../../components/util\";\r\n\r\nconst dataFilter = ({\r\n  timeFrameBrush = [],\r\n  primers = [],\r\n  pType = [],\r\n  countries = [],\r\n  miss = [],\r\n  miss3 = [],\r\n  match = [],\r\n}) => {\r\n  /**\r\n   * A filter for gisaid table data in records orientation (list of objects where column names are mapped to their value for that row)\r\n   * @param {Array} timeFrameBrush: the min and max timeFrame for the sequence\r\n   * @param {Array} primers: specific name for a particular primer\r\n   * @param {Array} pType: the primer type, one of [\"fwd\", \"rev\", \"prb\"]\r\n   * @param {Array} countries: the list of country that the seq must be from\r\n   * @param {Array} miss:  the min and max misses for the sequence\r\n   * @param {Array} miss3: the min and max misses in 3' end\r\n   * @param {Array} match: the min and max homolog %\r\n   * @returns {function} A function that takes a value and filter for parameters above\r\n   */\r\n  return (value) => {\r\n    let isWithinTimeFrame = true;\r\n    let isPrimer = true;\r\n    let isPType = true;\r\n    let isCountry = true;\r\n    let isMiss = true;\r\n    let isMiss3 = true;\r\n    let isMatch = true;\r\n\r\n    if (timeFrameBrush.length !== 0) {\r\n      const currDate = new Date(value.date);\r\n      const [startDate, endDate] = timeFrameBrush;\r\n      isWithinTimeFrame =\r\n        currDate.getTime() >= new Date(startDate).getTime() &&\r\n        currDate.getTime() <= new Date(endDate).getTime();\r\n    }\r\n    if (primers.length !== 0) {\r\n      isPrimer = primers.includes(value.primer);\r\n    }\r\n    if (pType.length !== 0) {\r\n      isPType = pType.includes(value.type);\r\n    }\r\n    if (countries.length !== 0) {\r\n      isCountry = countries\r\n        .map((val) => val.label)\r\n        .includes(value.country_name);\r\n    }\r\n    if (miss.length !== 0) {\r\n      isMiss =\r\n        value.misses >= (miss[0] || 0) && value.misses <= (miss[1] || 100);\r\n    }\r\n    if (miss3.length !== 0) {\r\n      isMiss3 =\r\n        value.misses3 >= (miss3[0] || 0) && value.misses3 <= (miss3[1] || 100);\r\n    }\r\n    if (match.length !== 0) {\r\n      isMatch =\r\n        value.match_pct >= (match[0] || 0) &&\r\n        value.match_pct <= (match[1] || 100);\r\n    }\r\n    return (\r\n      isWithinTimeFrame &&\r\n      isPrimer &&\r\n      isPType &&\r\n      isCountry &&\r\n      isMiss &&\r\n      isMiss3 &&\r\n      isMatch\r\n    );\r\n  };\r\n};\r\n\r\nexport function filterTable({\r\n  baseTableData,\r\n  timeFrameBrush = [],\r\n  primers = [],\r\n  pType = [],\r\n  countries = [],\r\n  miss = [],\r\n  miss3 = [],\r\n  match = [],\r\n}) {\r\n  return baseTableData.filter(\r\n    dataFilter({\r\n      primers: primers,\r\n      pType: pType,\r\n      countries: countries,\r\n      miss: miss,\r\n      miss3: miss3,\r\n      match: match,\r\n      timeFrameBrush: timeFrameBrush,\r\n    })\r\n  );\r\n}\r\nfunction addObject(obj1, obj2, initialSum = 0) {\r\n  /**\r\n   * Adds the item in obj2 into obj1\r\n   * @param {Object} obj1: the obj in which items will be added too.\r\n   * @param {Object} obj2: The Object from which are retrieved to be added.\r\n   * @param {Any} initialSum: the value to be added when Obj2 contains an item Obj1 does not.\r\n   * @returns {Object} An object containing Obj1 + Obj2\r\n   */\r\n  let results = {};\r\n\r\n  for (let key of Object.keys(obj2)) {\r\n    results[key] = (obj1[key] || initialSum) + obj2[key];\r\n  }\r\n  return results;\r\n}\r\n\r\nfunction subObject(obj1, obj2) {\r\n  /**\r\n   * Subtracts the item in obj2 from obj1\r\n   * @param {Object} obj1: the obj in which items will be removed from.\r\n   * @param {Object} obj2: The Object from which items are retrieved to be removed.\r\n   * @returns {Object} An object containing Obj1 + Obj2\r\n   */\r\n  let results = {};\r\n  for (const key of Object.keys(obj2)) {\r\n    results[key] = obj1[key] - obj2[key];\r\n  }\r\n  return results;\r\n}\r\nfunction getRangeDbCount(dbCount, lookBack, dates) {\r\n  /**\r\n   * Calculates a rolling window for database\r\n   * @param {Object} dbCount: Contains the virus numbers in date -> country -> count order\r\n   * @param {Number} lookBack: the lookBack period. Only has effect if [useCum] is false\r\n   */\r\n\r\n  const now = new Date(dates[0]);\r\n  const start = new Date(now);\r\n  const end = new Date(dates[dates.length - 1]);\r\n  start.setDate(start.getDate() + lookBack);\r\n  const nowStr = now.toISOString().slice(0, 10);\r\n  const dateWindowCum = {};\r\n  dateWindowCum[nowStr] = JSON.parse(JSON.stringify(dbCount[nowStr]));\r\n  now.setDate(now.getDate() + 1);\r\n\r\n  for (let d = now; d <= start; d.setDate(d.getDate() + 1)) {\r\n    const dateStr = d.toISOString().slice(0, 10);\r\n\r\n    let prevStr = new Date(d);\r\n    prevStr.setDate(prevStr.getDate() - 1);\r\n    prevStr = prevStr.toISOString().slice(0, 10);\r\n\r\n    dateWindowCum[dateStr] = addObject(\r\n      dateWindowCum[prevStr],\r\n      dbCount[dateStr] || {}\r\n    );\r\n  }\r\n\r\n  start.setDate(start.getDate() + 1);\r\n  for (let d = start; d <= end; d.setDate(d.getDate() + 1)) {\r\n    const dateStr = d.toISOString().slice(0, 10);\r\n    let prevVal = new Date(d);\r\n    prevVal.setDate(prevVal.getDate() - 1);\r\n    let toRemove = new Date(prevVal);\r\n    toRemove.setDate(toRemove.getDate() - lookBack);\r\n\r\n    prevVal = prevVal.toISOString().slice(0, 10);\r\n    toRemove = toRemove.toISOString().slice(0, 10);\r\n\r\n    dateWindowCum[dateStr] = addObject(\r\n      subObject(dateWindowCum[prevVal], dbCount[toRemove]),\r\n      dbCount[dateStr] || {}\r\n    );\r\n  }\r\n\r\n  return dateWindowCum;\r\n}\r\n\r\nfunction getCountriesTotal(dbCount, countries, date) {\r\n  /**\r\n   * Retrieve the total number of submissions by [countries] on [date]\r\n   * @param {Object} dbCount: Maps date -> Object [country alpha 3 -> submission count]\r\n   * @param {Array} countries: list of countries\r\n   * @param {string} date: the date to obtain submission count for\r\n   * @returns {Number} the total number of submissions by [countries] on [date]\r\n   */\r\n  if (countries.length === 0) {\r\n    return dbCount[date].total;\r\n  }\r\n  const total = countries.reduce((prevVal, country) => {\r\n    prevVal += dbCount[date][country.value] || 0;\r\n    return prevVal;\r\n  }, 0);\r\n  return total;\r\n}\r\n\r\nexport function getTotalSubmission({\r\n  dbDaily,\r\n  dbCum,\r\n  dateRange,\r\n  countries,\r\n  countryAsTotal,\r\n  useCum,\r\n  lookBack,\r\n  separate = false,\r\n}) {\r\n  if (useCum) {\r\n    const result = {};\r\n    for (const date of Object.keys(dbCum)) {\r\n      result[date] = countryAsTotal\r\n        ? getCountriesTotal(dbCum, countries, date)\r\n        : dbCum[date].total;\r\n    }\r\n    return result;\r\n  } else {\r\n    const result = getRangeDbCount(dbDaily, lookBack, dateRange);\r\n    if (separate) {\r\n      return result;\r\n    }\r\n    for (const date of dateRange) {\r\n      result[date] = countryAsTotal\r\n        ? getCountriesTotal(result, countries, date)\r\n        : result[date].total;\r\n    }\r\n    return result;\r\n  }\r\n}\r\n\r\nfunction combineData(f, data1, data2) {\r\n  /** combines two single graph data overview\r\n   * @param (string) f: Either \"add\" or \"subtract\"\r\n   * @param {Object} data1: The object we are adding to or subtracting from\r\n   * @param {Object} data2: The data we are using to add or subtract\r\n   * @returns {Object}: The combined result\r\n   */\r\n  if (f === \"add\") {\r\n    const m = data1.mutation_abs + data2.mutation_abs;\r\n    const m3 = data1.mutation3_abs + data2.mutation3_abs;\r\n    return {\r\n      name: data1.name,\r\n      date: data1.date,\r\n      mutation3_abs: m3,\r\n      mutation3_pct: (m3 / data1.submission_count) * 100,\r\n      mutation_abs: m,\r\n      mutation_pct: (m / data1.submission_count) * 100,\r\n      submission_count: data1.submission_count,\r\n      countries_considered: data1.countries_considered,\r\n      lookBack: data1.lookBack,\r\n    };\r\n  } else if (f === \"subtract\") {\r\n    const m = data1.mutation_abs - data2.mutation_abs;\r\n    const m3 = data1.mutation3_abs - data2.mutation3_abs;\r\n    return {\r\n      name: data1.name,\r\n      date: data1.date,\r\n      mutation3_abs: m3,\r\n      mutation3_pct: (m3 / data1.submission_count) * 100,\r\n      mutation_abs: m,\r\n      mutation_pct: (m / data1.submission_count) * 100,\r\n      submission_count: data1.submission_count,\r\n      countries_considered: data1.countries_considered,\r\n      lookBack: data1.lookBack,\r\n    };\r\n  } else {\r\n    throw `invalid f, expected \"add\" or \"subtract\", got ${f}`;\r\n  }\r\n}\r\nfunction accumulate(data, lookBack) {\r\n  /**\r\n   * Sliding window over the list of dates for a particular primer\r\n   * @param {Array} data: Contains a list of virus sequences missed\r\n   * @param {Number} lookBack: the lookBack period for the calculation\r\n   * @returns {Array}: a list of data points to be plotted for the line graph.\r\n   */\r\n  const result = [];\r\n  result.push({\r\n    name: data[0].name,\r\n    date: data[0].date,\r\n    mutation3_abs: data[0].mutation3_abs,\r\n    mutation3_pct: (data[0].mutation3_abs / data[0].submission_count) * 100,\r\n    mutation_abs: data[0].mutation_abs,\r\n    mutation_pct: (data[0].mutation_abs / data[0].submission_count) * 100,\r\n    submission_count: data[0].submission_count,\r\n    countries_considered: data[0].countries,\r\n    lookBack: data[0].lookBack,\r\n  });\r\n  if (lookBack === -1) {\r\n    for (let i = 1; i < data.length; i++) {\r\n      result.push(combineData(\"add\", data[i], result[i - 1]));\r\n    }\r\n  } else {\r\n    for (let i = 1; i <= lookBack; i++) {\r\n      result.push(combineData(\"add\", data[i], result[i - 1]));\r\n    }\r\n    for (let i = lookBack + 1; i < data.length; i++) {\r\n      result.push(\r\n        combineData(\r\n          \"add\",\r\n          data[i],\r\n          combineData(\"subtract\", result[i - 1], data[i - 1 - lookBack])\r\n        )\r\n      );\r\n    }\r\n  }\r\n  return result;\r\n}\r\nfunction buildLineGraphData({\r\n  toPlot,\r\n  primers,\r\n  dateRange,\r\n  pType,\r\n  countries,\r\n  miss,\r\n  miss3,\r\n  match,\r\n  totalSubmission,\r\n  useCum,\r\n  lookBack,\r\n}) {\r\n  const results = [];\r\n  for (const primer of primers) {\r\n    results.push(\r\n      dateRange.map((date) => {\r\n        const filteredData = (toPlot[primer][date] || []).reduce(\r\n          (prevVal, currVal) => {\r\n            if (\r\n              dataFilter({\r\n                pType: pType,\r\n                countries: countries,\r\n                miss: miss,\r\n                miss3: miss3,\r\n                match: match,\r\n              })(currVal)\r\n            ) {\r\n              prevVal[0].add(currVal.virus_name);\r\n              if (currVal.misses3 >= 1) {\r\n                prevVal[1].add(currVal.virus_name);\r\n              }\r\n            }\r\n            return prevVal;\r\n          },\r\n          [new Set(), new Set()]\r\n        );\r\n        return {\r\n          name: primer,\r\n          date: date,\r\n          mutation3_abs: filteredData[1].size,\r\n          mutation3_pct: 0,\r\n          mutation_abs: filteredData[0].size,\r\n          mutation_pct: 0,\r\n          submission_count: totalSubmission[date],\r\n          countries_considered: countries,\r\n          lookBack: useCum ? -1 : lookBack,\r\n        };\r\n      })\r\n    );\r\n  }\r\n\r\n  return useCum\r\n    ? results.map((result) => {\r\n        return accumulate(result, -1);\r\n      })\r\n    : results.map((result) => {\r\n        return accumulate(result, lookBack);\r\n      });\r\n}\r\nexport function getLineGraphData({\r\n  baseData,\r\n  dateRange,\r\n  primers,\r\n  pType,\r\n  countries,\r\n  miss,\r\n  miss3,\r\n  match,\r\n  totalSubmission,\r\n  useCum,\r\n  lookBack,\r\n}) {\r\n  const toPlot = {};\r\n  for (const primer of Object.keys(baseData)) {\r\n    if (primers.length === 0) {\r\n      toPlot[primer] = baseData[primer];\r\n    } else if (primers.find((val) => val === primer)) {\r\n      toPlot[primer] = baseData[primer];\r\n    }\r\n  }\r\n  return buildLineGraphData({\r\n    toPlot: toPlot,\r\n    primers: primers.length === 0 ? Object.keys(baseData) : primers,\r\n    dateRange: dateRange,\r\n    pType: pType,\r\n    countries: countries,\r\n    miss: miss,\r\n    miss3: miss3,\r\n    match: match,\r\n    totalSubmission: totalSubmission,\r\n    useCum: useCum,\r\n    lookBack: lookBack,\r\n  });\r\n}\r\n\r\nexport function getCombinedLineData(\r\n  toPlot,\r\n  primers,\r\n  dateRange,\r\n  pType,\r\n  countries,\r\n  miss,\r\n  miss3,\r\n  match,\r\n  totalSubmission,\r\n  useCum,\r\n  lookBack\r\n) {\r\n  return buildLineGraphData({\r\n    toPlot: toPlot,\r\n    primers: primers,\r\n    dateRange: dateRange,\r\n    pType: pType,\r\n    countries: countries,\r\n    miss: miss,\r\n    miss3: miss3,\r\n    match: match,\r\n    totalSubmission: totalSubmission,\r\n    useCum: useCum,\r\n    lookBack: lookBack,\r\n  });\r\n}\r\n\r\nexport function makeBarData({\r\n  graphOverview,\r\n  dates,\r\n  timeFrameBrush,\r\n  daysBetweenComparison,\r\n  numberOfBars,\r\n}) {\r\n  /**\r\n   * Makes the bar data to be used for display\r\n   * @param {Array} graphBase: List of List of Map containing \"date\", \"name\", \"mutation_pct\", \"mutation3_pct\", \"mutation_abs\", \"mutation3_abs\", \"submission_count\", and  \"countries_considered\". Each list correspond to a primer in primerNames of the same index\r\n   * @param {Array} primerNames: Contains the list primer names\r\n   * @param {Object} dbCount: Contains the virus numbers in date -> country -> count order\r\n   * @param {Array} timeFrameBrush: Contains the minimum and maximum date of interest\r\n   * @returns {Array} Contains a List of List. Each list corresponds to a particular primer\r\n   */\r\n  const dateDetails = [];\r\n\r\n  const now = timeFrameBrush[1] || new Date(dates[dates.length - 1]);\r\n  const start = new Date(now);\r\n  start.setDate(start.getDate() - daysBetweenComparison * numberOfBars);\r\n  while (start.getTime() < new Date(dates[0])) {\r\n    start.setDate(start.getDate() + daysBetweenComparison);\r\n  }\r\n  for (\r\n    let d = start;\r\n    d <= now;\r\n    d.setDate(d.getDate() + daysBetweenComparison)\r\n  ) {\r\n    const primerMutations = [];\r\n    for (let i = 0; i < graphOverview.length; i++) {\r\n      const details = graphOverview[i].filter(\r\n        (val) => val.date === d.toISOString().slice(0, 10)\r\n      );\r\n      primerMutations.push(...details);\r\n    }\r\n    dateDetails.push(primerMutations);\r\n  }\r\n\r\n  return dateDetails;\r\n}\r\n\r\nfunction findIntersection(list1, list2, key, intersect = true) {\r\n  /**\r\n   * Finds the intersection between two list\r\n   * @param {Bool} intersect: finds the intersection of [list1] and [list2] if true\r\n   *  otherwise, finds items in [list1] and not in [list2]\r\n   */\r\n\r\n  if (key) {\r\n    let result = list1.filter(\r\n      ((set) => (item) => {\r\n        return intersect === set.has(item[key]);\r\n      })(new Set(list2.map((item) => item[key])))\r\n    );\r\n    return result;\r\n  } else {\r\n    const result = list1.filter(\r\n      ((set) => (item) => {\r\n        return intersect === set.has(item);\r\n      })(new Set(list2.map((item) => item)))\r\n    );\r\n    return result;\r\n  }\r\n}\r\n\r\nfunction findListIntersection(itemList, key = \"accession_id\") {\r\n  /**\r\n   * Finds the intersecting items within each list\r\n   * @param   {Array}  itemList: Contains lists which contain info to find intersection of.\r\n   * @param   {string} keys: Optional choice to specify if items in lists are objects\r\n   * @returns {Array} An array containing items which are common across all list.\r\n   */\r\n  // List only contains one list, so we return it\r\n  let intersection = itemList[0];\r\n  for (let i = 1; i < itemList.length; i++) {\r\n    intersection = findIntersection(intersection, itemList[i], key);\r\n  }\r\n  return intersection;\r\n}\r\n\r\nexport function makeIntersection(tableData, primerNames) {\r\n  /**\r\n   * Creates data for intersecting values if any\r\n   * @param {Array} tableData: contains the info on the primers to display\r\n   * @param {Array} primerNames: Contains the list of primer names\r\n   * @returns {Array}: List of virus that is missed by all primers\r\n   * @returns {string}: name of the combined primers\r\n   */\r\n\r\n  let intersection = [];\r\n  if (primerNames.length > 1) {\r\n    const name = primerNames.join(\", \");\r\n    intersection = findListIntersection(Object.values(tableData));\r\n    intersection = intersection.map(addName(name));\r\n    return [intersection, [name]];\r\n  }\r\n  return [intersection, \"\"];\r\n}\r\n"],"sourceRoot":""}