(this.webpackJsonpprimer_checker=this.webpackJsonpprimer_checker||[]).push([[0],{322:function(e,t,a){e.exports=a(688)},327:function(e,t,a){},329:function(e,t,a){},333:function(e,t,a){},334:function(e,t,a){},335:function(e,t,a){},353:function(e,t,a){},356:function(e,t,a){},372:function(e,t,a){},377:function(e,t,a){},682:function(e,t,a){},684:function(e,t,a){},688:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(34),s=a.n(l),c=(a(327),a(11)),o=a(87),i=a(27),u=a(28),m=a(19),d=a(23),p=a(35),f=a(38),g=a(72),b=a(205),h=a(108),v=a(50),E=a(74),y=a.n(E),x=a(163),O=(a(329),function(e){return null!==/^>fwd[\s\S]{2}[ACGTacgt]+[\s\S]{1,2}>rev[\s\S]{1,2}[ACGTacgt]+[\s\S]{1,2}>prb[\s\S]{1,2}[ACGTacgt]+[\s\S]{1,2}$/.exec(e)});var S=function(e){var t=e.selectedFiles,a=e.setSelectedFiles,n=e.setErrorMessage,l=function(){var e=Object(x.a)(y.a.mark((function e(t){var a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.target.files,e.next=3,s(a);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s=function(){var e=Object(x.a)(y.a.mark((function e(n){var r,l,s,o;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=[],l=Object(v.a)(n),e.prev=2,l.s();case 4:if((s=l.n()).done){e.next=13;break}return o=s.value,e.t0=r,e.next=9,c(o);case 9:e.t1=e.sent,r=e.t0.concat.call(e.t0,e.t1);case 11:e.next=4;break;case 13:e.next=18;break;case 15:e.prev=15,e.t2=e.catch(2),l.e(e.t2);case 18:return e.prev=18,l.f(),e.finish(18);case 21:a(t.concat.apply(t,Object(u.a)(r)));case 22:case"end":return e.stop()}}),e,null,[[2,15,18,21]])})));return function(t){return e.apply(this,arguments)}}(),c=function(){var e=Object(x.a)(y.a.mark((function e(t){var a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o(t);case 3:return a=e.sent,e.abrupt("return",a);case 7:e.prev=7,e.t0=e.catch(0),console.warn(e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),o=function(e){var t=new FileReader;return console.log(e),new Promise((function(a,r){t.onload=function(t){O(t.target.result)?(e.invalid=!1,e.content=t.target.result,e.id=e.name):(console.log("file loaded but invalid format"),n("File not a recognized format. Please check"),e.invalid=!0),a(e)},t.onerror=function(){t.abort(),r(new DOMException("Problem parsing input file."))},t.readAsText(e,"UTF-8")}))};return r.a.createElement(m.a.Group,{controlId:"fasta-sequence"},r.a.createElement("label",{htmlFor:"fasta-input",id:"fasta-input-label"},r.a.createElement(f.a,{className:"drop-container",onDragOver:function(e){e.preventDefault()},onDragEnter:function(e){e.preventDefault()},onDragLeave:function(e){e.preventDefault()},onDrop:function(e){e.preventDefault();var t=e.dataTransfer.files;s(t)}},r.a.createElement("div",{className:"drop-message"},r.a.createElement("div",{className:"upload-icon"}),"Drag & Drop files here or click to upload"),r.a.createElement("input",{className:"file-input",id:"fasta-input",type:"file",onChange:l,multiple:!0}))))},C=(a(333),a(12)),w=function(e){var t=e.setTextFieldFasta,a=Object(n.useState)(""),l=Object(c.a)(a,2),s=l[0],o=l[1],i=Object(n.useState)(""),u=Object(c.a)(i,2),f=u[0],g=u[1],b=">fwd\nGTGAAATGGTCATGTGTGGCGG\n>rev\nTATGCTAATAGTGTTTTTAACATTTG\n>prb\nCAGGTGGAACCTCATCAGGAGATGC";Object(n.useEffect)((function(){O(f)?(console.log("sequence oKAY!",f),t([{invalid:!1,content:f,id:"text_input_fasta"}])):(console.log("Nope"),t([]),o("Sequence not recognized! Please check."))}),[f,t]);return r.a.createElement(m.a.Group,{controlId:"fasta-sequence"},r.a.createElement(d.a,{className:"fasta-input-header"},r.a.createElement(C.a,null,r.a.createElement(m.a.Label,{className:"fasta-input-title"},"Fasta Sequence")),r.a.createElement(C.a,{className:"sample-fasta"},r.a.createElement(p.a,{variant:"secondary",size:"sm",onClick:function(){g(b)}},"Sample Input"))),r.a.createElement(m.a.Control,{as:"textarea",placeholder:"Input Fasta Seq here.",onChange:function(e){var t=e.target.value;g(t)},type:"text",value:f,className:"mx-sm-lg-auto","aria-describedby":"fastaSequenceHelpBlock"}),r.a.createElement(m.a.Text,{id:"fastaSequenceHelpBlock",muted:!0},"Format for the primer sequence should be as follows:",r.a.createElement("br",null),r.a.createElement("strong",null,b.split("\n").map((function(e,t){return r.a.createElement("p",{key:t},e)})))),r.a.createElement(m.a.Control.Feedback,{type:"invalid"},s))},T=(a(334),a(335),a(111)),j=function(e){var t=e.show,a=e.handleClose,n=e.content;return r.a.createElement(T.a,{show:t,onHide:a},r.a.createElement(T.a.Header,{closeButton:!0},r.a.createElement(T.a.Title,null,"Fasta Primer Preview")),r.a.createElement(T.a.Body,null,function(e){for(var t=Object(u.a)(e.matchAll(/\s+/g)),a=[],n=0;n<t.length;n++)a=0===n?a.concat(e.slice(0,t[0].index)):a.concat(e.slice(t[n-1].index+1,t[n].index));return a}(n).map((function(e,t){return r.a.createElement("p",{key:t},e)}))),r.a.createElement(T.a.Footer,null,r.a.createElement(p.a,{variant:"primary",onClick:a},"Close")))},k=function(e){var t=e.file,a=e.errorMessage,l=e.setSelectedFiles,s=Object(n.useState)(""),o=Object(c.a)(s,2),i=o[0],u=o[1],m=Object(n.useState)(!1),g=Object(c.a)(m,2),b=g[0],h=g[1],v=function(e){l((function(t){return t.filter((function(t){return t.name!==e}))}))};return r.a.createElement(f.a,{className:"file-status-bar"},r.a.createElement(d.a,null,r.a.createElement("div",{className:"file-type-logo"}),r.a.createElement("div",{className:"file-type"},function(e){var t=e.substring(e.lastIndexOf(".")+1,e.length);return t.length===e.length?"Fasta":t}(t.name)),r.a.createElement(C.a,{lg:5,md:12,className:"file-info"},r.a.createElement("div",{className:"file-name ".concat(t.invalid?"file-error":""),onClick:t.invalid?function(){return v(t.name)}:function(){return function(e){u(e.content),h(!0)}(t)}},t.name),r.a.createElement("div",{className:"file-size"},"(",function(e){if(0===e)return"0 Bytes";var t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB","TB"][t]}(t.size),")")),r.a.createElement(C.a,{lg:4,md:8,className:"file-error-message"},t.invalid?r.a.createElement("div",{className:"file-error-message-text"},"(",a,")"):null),r.a.createElement(C.a,{lg:2,md:2,className:"file-remove"},r.a.createElement(p.a,{onClick:function(){return v(t.name)},variant:"danger",size:"sm"},"Remove"))),r.a.createElement(j,{show:b,handleClose:function(){return h(!1)},content:i}))},D=a(202),N=a.n(D),F=function(e){var t={data:e};return N.a.post("".concat("http://localhost:3001","/check_primers"),t)},_=(a(353),function(e){var t=e.setResults,a=Object(n.useState)(!1),l=Object(c.a)(a,2),s=l[0],o=l[1],v=Object(n.useState)([]),E=Object(c.a)(v,2),y=E[0],x=E[1],O=Object(n.useState)([]),C=Object(c.a)(O,2),T=C[0],j=C[1],D=Object(n.useState)([]),N=Object(c.a)(D,2),_=N[0],M=N[1],A=Object(n.useState)([]),P=Object(c.a)(A,2),B=P[0],I=P[1],G=Object(n.useState)(""),z=Object(c.a)(G,2),H=z[0],R=z[1],L=Object(n.useState)(""),V=Object(c.a)(L,2),q=V[0],J=V[1],W=Object(n.useState)(!0),U=Object(c.a)(W,2),K=U[0],Y=U[1],Z=Object(n.useState)(!1),$=Object(c.a)(Z,2),Q=$[0],X=$[1],ee=Object(i.f)(),te="open-containers";Object(n.useEffect)((function(){var e=y.reduce((function(e,t){return e.find((function(e){return e.name===t.name}))?e:e.concat(t)}),[]);j(Object(u.a)(e))}),[y]),Object(n.useEffect)((function(){var e=T.reduce((function(e,t){return t.invalid?e:e.concat(t)}),[]);M(e)}),[T]),Object(n.useEffect)((function(){if(_.length===T.length&&0!==_.length&&0===B.length||0!==B.length&&0===_.length)return console.log(_),J(""),o(!0);0!==B.length&&0!==_.length&&(o(!1),J("Either upload a single sequence through input or select files to upload! Not Both!")),o(!1)}),[_,T,B]);return r.a.createElement("div",null,r.a.createElement(g.a,{id:te,in:K},r.a.createElement("div",{className:"collapse-container"},r.a.createElement(f.a,null,r.a.createElement(m.a,{noValidate:!0},r.a.createElement(w,{setTextFieldFasta:I}),r.a.createElement("p",{className:"alternative-upload"},"OR"),r.a.createElement(S,{selectedFiles:y,setSelectedFiles:x,setErrorMessage:R})),r.a.createElement(f.a,{className:"file-display-container"},T.map((function(e,t){return r.a.createElement(k,{file:e,errorMessage:H,setSelectedFiles:x,key:t})})))))),r.a.createElement(f.a,null,r.a.createElement(d.a,{className:"upload-error-message"},q),s?r.a.createElement(h.a,{in:K},r.a.createElement(p.a,{id:te,"aria-controls":te,"aria-expanded":K,onClick:function(){console.log(_,B),Y(!K),X(!0),setTimeout((function(){F(0===_.length?B:_).then((function(e){o(!1),x([]),I([]),R(""),J(""),X(!1),console.log("response is",e),t(JSON.stringify(e.data)),ee.push("/results/Overview")})).catch((function(e){return console.log(e)}))}),500)},disabled:Q},Q?r.a.createElement(b.a,{as:"span",className:"loader",animation:"border",size:"sm",role:"status","aria-hidden":"true"}):null,Q?"Loading...":"Submit")):null,Q?r.a.createElement(h.a,{in:!K},r.a.createElement(f.a,{className:"loading-container"},r.a.createElement(b.a,{id:te,as:"span",animation:"border",role:"status",variant:"dark"}))):null))}),M=(a(356),a(14)),A=a(313),P=a.n(A),B=a(319),I=a(318),G=Object(I.a)();var z=function(e){var t=e.onChange,a=e.options,n=e.placeholder,l=e.isLoading,s=void 0!==l&&l,c=e.defaultValue,o=void 0===c?[]:c;return r.a.createElement(B.a,{closeMenuOnSelect:!1,components:G,defaultValue:o,isMulti:!0,isSearchable:!0,isClearable:!0,isLoading:s,placeholder:n,onChange:t,options:a})};var H=function(e){var t=e.data,a=e.id,n=e.value,l=e.minVal,s=e.maxVal,o=e.step,i=e.setFilter,d=r.a.useMemo((function(){var e=Object.values(t).reduce((function(e,t){return e.push.apply(e,Object(u.a)(t)),e}),[]),n=e.length?e[0][a]:0,r=e.length?e[0][a]:0;return e.forEach((function(e){n=Math.min(e[a],n),r=Math.max(e[a],r)})),[n,r]}),[t,a]),p=Object(c.a)(d,2),f=p[0],g=p[1],b=function(e,t){i(t?function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return[e,t[1]]}:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return[t[0],e]})};return r.a.createElement(m.a,{className:"filter"},r.a.createElement(m.a.Row,null,r.a.createElement(C.a,null,r.a.createElement(m.a.Control,{as:"input",value:n[0]||"",type:"number",onChange:function(e){var t=o.isInteger?parseInt(e.target.value,10)||0:parseFloat(e.target.value||0);b(t,!0)},placeholder:"Min (".concat(f,")"),size:"sm",min:l,max:s,step:o})),r.a.createElement(C.a,null,r.a.createElement(m.a.Control,{value:n[1]||"",type:"number",onChange:function(e){var t=o.isInteger?parseInt(e.target.value,10)||0:parseFloat(e.target.value||0);b(t,!1)},placeholder:"Max (".concat(g,")"),size:"sm",min:l,max:s,step:o}))))},R=(a(372),function(e){var t=e.id,a=e.className,n=e.checked,l=e.onChange,s=e.ariaControls,c=void 0===s?"":s,o=e.ariaExpanded,i=void 0===o?"":o;return r.a.createElement("label",{id:t,className:"switch ".concat(a),"aria-controls":c,"aria-expanded":i},r.a.createElement("input",{type:"checkbox",checked:n,onChange:l}),r.a.createElement("span",{className:"slider round"}))});var L=function(e){var t,a=e.baseData,n=e.colNames,l=e.timeFrameBrush,s=e.setTimeFrameBrush,c=e.lookBack,o=e.setLookBack,p=e.useCum,f=e.setUseCum,b=e.miss,h=e.setMiss,v=e.miss3,E=e.setMiss3,y=e.match,x=e.setMatch,O=e.countryAsTotal,S=e.setCountryAsTotal,w=e.setCountries,T=e.primers,j=e.setPrimers,k=e.setPType,D=e.isProcessing,N=e.setIsProcessing,F=e.isBar,_=e.setIsBar,A=e.daysBetweenComparison,B=e.setDaysBetweenComparison,I=e.numberOfBars,G=e.setNumberOfBars,L=e.showAbsDiff,V=e.setShowAbsDiff,q=e.showDailyGraph,J=e.setShowDailyGraph,W=Object(i.f)(),U="primer",K="type",Y="misses",Z="misses3",$="match_pct",Q="country_name",X=function(e){return function(t){return e.filter((function(e){return e.accessor===t}))[0].Header}}(n);function ee(e){return function(t){N(!0);var a=t||[];if(console.log(t),0===a.length)e(a);else{var n=a.map((function(e){return e.value===e.label?e.value:e}));console.log(n),e(n)}}}return r.a.createElement("div",null,r.a.createElement(d.a,null,r.a.createElement(C.a,{xs:12,lg:7,className:"mb-3"},r.a.createElement(d.a,null,r.a.createElement(C.a,{sm:12,lg:2,className:"mr-0 pr-lg-0"},r.a.createElement(M.a.Text,null,"".concat(X(U)))),r.a.createElement(C.a,{sm:12,lg:10,className:"pl-lg-0"},r.a.createElement(z,{value:T,onChange:(t=j,function(e){N(!0);var a=e||[];if(0===a.length)t(a),W.push("/results/Overview");else{var n=a.map((function(e){return e.value}));t(n),W.push("/results/".concat(n.join("&")))}}),options:r.a.useMemo((function(){return Object.keys(a).map((function(e){return{label:e,value:e}}))}),[a]),placeholder:"Select Primer to Display",isLoading:D})))),r.a.createElement(C.a,{xs:12,lg:5,className:"mb-3"},r.a.createElement(d.a,null,r.a.createElement(C.a,{sm:12,lg:4,className:"mr-0 pr-lg-0"},r.a.createElement(M.a.Text,null,"".concat(X(K)))),r.a.createElement(C.a,{sm:12,lg:8,className:"pl-lg-0"},r.a.createElement(z,{onChange:ee(k),options:r.a.useMemo((function(){return[{label:"fwd",value:"fwd"},{label:"rev",value:"rev"},{label:"prb",value:"prb"}]}),[]),placeholder:"Specify Type",isLoading:D}))))),r.a.createElement(d.a,null,r.a.createElement(C.a,{className:"mb-3 pr-lg-0",xs:12,lg:4},r.a.createElement(M.a,{size:"sm"},r.a.createElement(M.a.Prepend,null,r.a.createElement(M.a.Text,null,"".concat(X(Y)))),r.a.createElement(H,{data:a,minVal:0,maxVal:100,step:1,value:b,setFilter:h,id:Y}))),r.a.createElement(C.a,{className:"mb-3 pr-lg-0 pl-lg-0",xs:12,lg:4},r.a.createElement(M.a,{size:"sm"},r.a.createElement(M.a.Prepend,null,r.a.createElement(M.a.Text,null,"".concat(X(Z)))),r.a.createElement(H,{data:a,minVal:0,maxVal:100,step:1,value:v,setFilter:E,id:Z}))),r.a.createElement(C.a,{className:"mb-3 pl-lg-0",xs:12,lg:4},r.a.createElement(M.a,{size:"sm"},r.a.createElement(M.a.Prepend,null,r.a.createElement(M.a.Text,null,"".concat(X($)))),r.a.createElement(H,{data:a,minVal:0,maxVal:100,step:.01,value:y,setFilter:x,id:$})))),r.a.createElement(d.a,null,r.a.createElement(C.a,{xs:12,lg:5,className:"pr-lg-0"},r.a.createElement(M.a,{className:"mb-3 ",size:"sm"},r.a.createElement(M.a.Prepend,null,r.a.createElement(M.a.Text,null,"Date Range")),r.a.createElement(P.a,{onChange:function(e){console.log("e :>> ",e),s(e||[])},value:0===l.length?null:l}))),r.a.createElement(C.a,{xs:12,lg:3,className:"pr-lg-0 pl-lg-0"},r.a.createElement(M.a,{className:"mb-3",size:"sm"},r.a.createElement(M.a.Prepend,null,r.a.createElement(M.a.Text,{htmlFor:"cumulative"},"Daily Submissions as Total")),r.a.createElement(R,{id:"cumulative",className:"use-cumulative",checked:!p,onChange:function(e){f(!e.target.checked)}}))),r.a.createElement(C.a,{xs:12,lg:4,className:"pl-lg-0"},r.a.createElement(M.a,{className:"mb-3 ",size:"sm"},r.a.createElement(M.a.Prepend,null,r.a.createElement(M.a.Text,null,"Look Back")),r.a.createElement(m.a.Control,{value:c.toString(),disabled:p,as:"input",type:"number",min:0,max:200,step:1,onChange:function(e){var t=e.target.value;o(parseInt(t,10)||0)}})))),r.a.createElement(d.a,null,r.a.createElement(C.a,{sm:12,lg:8,className:"mb-3"},r.a.createElement(d.a,null,r.a.createElement(C.a,{sm:12,lg:2,className:"mr-0 pr-lg-0"},r.a.createElement(M.a.Text,null,"".concat(X(Q)))),r.a.createElement(C.a,{sm:12,lg:10,className:"pl-lg-0"},r.a.createElement(z,{className:"country-picker",onChange:ee(w),options:r.a.useMemo((function(){var e=new Set;return Object.values(a).reduce((function(t,a){var n=a.reduce((function(t,a){return e.has(a.country_name)||(e.add(a.country_name),t.push({label:a.country_name,value:a.ISO_A3})),t}),[]);return t.push.apply(t,Object(u.a)(n)),t}),[])}),[a]),placeholder:"Filter Countries",isLoading:D})))),r.a.createElement(C.a,{sm:12,lg:4},r.a.createElement(M.a,{className:"mb-3",size:"sm"},r.a.createElement(M.a.Prepend,null,r.a.createElement(M.a.Text,{htmlFor:"country"},"Selected Countries as Total")),r.a.createElement(R,{id:"country",className:"use-country",checked:O,onChange:function(e){S(e.target.checked)}})))),r.a.createElement(d.a,null,r.a.createElement(C.a,{sm:12,lg:2.5},r.a.createElement(M.a,{className:"mb-3",size:"sm"},r.a.createElement(M.a.Prepend,null,r.a.createElement(M.a.Text,null,"Show Bar Graph")),r.a.createElement(R,{type:"checkbox",checked:F,onChange:function(){return _(!F)},"aria-controls":"use-bars","aria-expanded":F}))),r.a.createElement(C.a,{sm:12,lg:9.5},r.a.createElement(g.a,{in:F},r.a.createElement("div",{id:"use-bars"},r.a.createElement(d.a,null,r.a.createElement(C.a,{sm:12,lg:4},r.a.createElement(M.a,{className:"mb-3",size:"sm"},r.a.createElement(M.a.Prepend,null,r.a.createElement(M.a.Text,null,"Show Absolute Diff")),r.a.createElement(R,{type:"checkbox",checked:L,onChange:function(){return V(!L)}}))),r.a.createElement(C.a,{sm:12,lg:4},r.a.createElement(M.a,{className:"mb-3",size:"sm"},r.a.createElement(M.a.Prepend,null,r.a.createElement(M.a.Text,null,"Days between Comparison")),r.a.createElement(m.a.Control,{value:A.toString(),disabled:!F,as:"input",type:"number",min:1,max:200,step:1,onChange:function(e){var t=e.target.value;B(parseInt(t,10)||0)}}))),r.a.createElement(C.a,{sm:12,lg:4},r.a.createElement(M.a,{className:"mb-3",size:"sm"},r.a.createElement(M.a.Prepend,null,r.a.createElement(M.a.Text,null,"Number of bars")),r.a.createElement(m.a.Control,{value:I.toString(),disabled:!F,as:"input",type:"number",min:1,max:20,step:1,onChange:function(e){var t=e.target.value;G(parseInt(t,10)||0)}})))))))),r.a.createElement(d.a,null,r.a.createElement(C.a,{sm:12,lg:4},r.a.createElement(M.a,{className:"mb-3",size:"sm"},r.a.createElement(M.a.Prepend,null,r.a.createElement(M.a.Text,null,"Use Daily Count for Map")),r.a.createElement(R,{type:"checkbox",checked:q,onChange:function(){return J(!q)}})))))},V=a(62),q=a(315),J=a(160);a(377);function W(e){var t=e.preGlobalFilteredRows,a=e.globalFilter,n=e.setGlobalFilter,l=e.isHelpOn,s=void 0===l||l,o=t.length,i=r.a.useState(a),u=Object(c.a)(i,2),d=u[0],p=u[1],f=Object(V.useAsyncDebounce)((function(e){n(e||void 0)}),200);return r.a.createElement("div",{className:"general-search"},r.a.createElement(m.a.Row,null,r.a.createElement(m.a.Label,{column:!0,sm:12,lg:2},"General Search"),r.a.createElement(C.a,{sm:12,lg:10},r.a.createElement(m.a.Control,{type:"text",value:d||"",onChange:function(e){p(e.target.value),f(e.target.value)},placeholder:"Search the ".concat(o," entries")}))),s?r.a.createElement(m.a.Row,null,r.a.createElement(m.a.Label,{column:!0,sm:0,lg:2}),r.a.createElement(C.a,{sm:12,lg:10},r.a.createElement(m.a.Text,{className:"text-muted"},"This does not affect plot data. If you want to set filters, set the options above."))):null)}function U(e){var t=e.title,a=e.data,n=e.columns,l=e.isCombined,s=n.map((function(e){return{label:e.Header,key:e.accessor}}));l||s.push.apply(s,[{label:"ISO A3",key:"ISO_A3"},{label:"Virus Match Index (Start, End)",key:"virus_match_idx"},{label:"Primer Match Index (Start, End)",key:"query_match_idx"}]);var c=r.a.useMemo((function(){return{text:function(e,t,a){return e.filter((function(e){var n=e.values[t];return void 0===n||String(n).toLowerCase().startsWith(String(a).toLowerCase())}))}}}),[]),o=r.a.useMemo((function(){return{minWidth:80,width:160,maxWidth:600}}),[]),i=Object(V.useTable)({columns:n,data:a,initialState:{pageIndex:0},defaultColumn:o,filterTypes:c},V.useGlobalFilter,V.useSortBy,V.usePagination,V.useFlexLayout,V.useResizeColumns),u=i.getTableProps,f=i.getTableBodyProps,g=i.headerGroups,b=i.prepareRow,h=i.page,v=i.canPreviousPage,E=i.canNextPage,y=i.pageOptions,x=i.pageCount,O=i.gotoPage,S=i.nextPage,w=i.previousPage,T=i.setPageSize,j=i.state,k=j.pageIndex,D=j.pageSize,N=i.state,F=i.preGlobalFilteredRows,_=i.setGlobalFilter;return r.a.createElement("div",null,r.a.createElement("h2",{className:"table-title"},t),r.a.createElement(W,{preGlobalFilteredRows:F,globalFilter:N.globalFilter,setGlobalFilter:_}),r.a.createElement(q.a,Object.assign({},u(),{variant:"light",responsive:!0,striped:!0,bordered:!0,hover:!0}),r.a.createElement("thead",{className:"thead"},g.map((function(e){return r.a.createElement("tr",e.getHeaderGroupProps(),e.headers.map((function(e){return r.a.createElement("th",Object.assign({},e.getHeaderProps(),{className:"table-header"}),e.render("Header"),r.a.createElement("span",e.getSortByToggleProps(),e.isSorted?e.isSortedDesc?" ".concat(String.fromCodePoint(parseInt("25BC",16))):" ".concat(String.fromCodePoint(parseInt("25B2",16))):" ".concat(String.fromCodePoint(parseInt("25BC",16))).concat(String.fromCodePoint(parseInt("25B2",16)))),e.canResize&&r.a.createElement("div",Object.assign({},e.getResizerProps(),{className:"resizer ".concat(e.isResizing?"isResizing":"")})))})))}))),r.a.createElement("tbody",Object.assign({},f(),{className:"tbody"}),h.map((function(e){return b(e),r.a.createElement("tr",e.getRowProps(),e.cells.map((function(e){if("match_diag"===e.column.id){var t=e.value.split(" ").map((function(e){return e.split("")}));return r.a.createElement("td",Object.assign({},e.getCellProps(),{className:"table-cell match-diag"}),t.map((function(e,t){return r.a.createElement("div",{key:t},e.map((function(e,t){return r.a.createElement("span",{key:t,className:e},e)})))})))}return r.a.createElement("td",Object.assign({},e.getCellProps(),{className:"table-cell ".concat("country_name"===e.column.id||"virus_name"===e.column.id?"text-align-start":"")}),e.render("Cell"))})))})),E?null:r.a.createElement("tr",{className:"end-of-data"},r.a.createElement("td",null,"---------- All Data Displayed ----------")))),r.a.createElement(d.a,{className:"pagination"},r.a.createElement(C.a,{className:"page-controls",sm:12,md:4},r.a.createElement(p.a,{variant:"light",onClick:function(){return O(0)},disabled:!v},"<<"),r.a.createElement(p.a,{variant:"light",onClick:function(){return w()},disabled:!v},"<"),r.a.createElement(p.a,{variant:"light",onClick:function(){return S()},disabled:!E},">"),r.a.createElement(p.a,{variant:"light",onClick:function(){return O(x-1)},disabled:!E},">>"),r.a.createElement("p",null," ","Page ",r.a.createElement("strong",null,k+1," ")," of"," ",r.a.createElement("strong",null,y.length))),r.a.createElement(C.a,{className:"manual-page-selection",sm:12,md:4},r.a.createElement(M.a,null,r.a.createElement(M.a.Prepend,null,r.a.createElement(M.a.Text,{id:"page-info"},"Go to page:")),r.a.createElement(m.a.Control,{type:"number",defaultValue:k+1,onChange:function(e){var t=e.target.value?Number(e.target.value)-1:0;O(t)},"aria-label":"Go To Page","aria-describedby":"page-info"}))),r.a.createElement(C.a,{className:"results-per-page",sm:12,md:4},r.a.createElement(m.a.Control,{value:D,onChange:function(e){T(Number(e.target.value))},as:"select"},[10,20,30,40,50].map((function(e){return r.a.createElement("option",{key:e,value:e},"Show ",e)}))))),r.a.createElement(d.a,null,r.a.createElement(J.CSVLink,{data:a,headers:s,filename:l?"combined_miss.csv":"sensitivity_miss.csv",className:"btn btn-dark",target:"_blank"},"Download Table")))}var K=function(e){var t=e.title,a=e.data,n=e.columns,l=e.isCombined,s=e.isCollapsable,o=r.a.useState(!0),i=Object(c.a)(o,2),u=i[0],m=i[1];return s?r.a.createElement(r.a.Fragment,null,r.a.createElement(p.a,{onClick:function(){m(!u)},className:"show-table mb-3 mt-3","aria-controls":"collapse-table","aria-expanded":u,variant:"light"},u?"".concat(String.fromCodePoint(parseInt("25BC",16))," Close Table"):"> Show Table"),r.a.createElement(g.a,{in:u},r.a.createElement("div",null,r.a.createElement(U,{id:"collapse-table",title:t,data:a,columns:n,isCombined:l})))):r.a.createElement("div",null,r.a.createElement(U,{id:"collapse-table",title:t,data:a,columns:n,isCombined:l}))},Y=a(161),Z=a.n(Y),$=function(e){var t=e.title,a=e.title2,n=e.data,l=e.primers,s=e.dates,c=(e.setPrimers,e.setTimeFrameBrush),o=e.timeFrameBrush,i=e.subtitle,m=void 0===i?"":i,d=e.subtitle2,p=void 0===d?"":d;function f(e,t,a,n){for(var r=[],l=0;l<e.length;l++)r.push({name:"".concat(e[l]),type:"line",hoverAnimation:!1,xAxisIndex:a,yAxisIndex:n,encode:{x:"date",y:t},datasetIndex:l});return r}function g(e,t){if(void 0!==e)return t.findIndex((function(t){return e.toISOString().slice(0,10)===t}))}var b=100*(g(o[0],s)||0)/s.length,h=100*(g(o[1],s)||s.length)/s.length,E=f(l,"mutation_pct",0,0),y=f(l,"mutation3_pct",1,1),x=function(e){var t,a=[],n=Object(v.a)(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;a.push({dimensions:["countries_considered","date","mutation3_abs","mutation3_pct","mutation_abs","mutation_pct","name","submission_count"],source:r})}}catch(l){n.e(l)}finally{n.f()}return a}(n),O={title:[{text:t,subtext:m,left:"center"},{text:a,subtext:p,left:"center",top:"center"}],tooltip:{trigger:"axis",axisPointer:{type:"cross",animation:!1},backgroundColor:"rgba(50,50,50, 0.9)",formatter:function(e){for(var t=e[0].data,a=t.date,n=t.submission_count,r="<div>Details for ".concat(a,"<br/>Total Submissions: ").concat(n,"</div><br/>"),s=0;s<l.length;s++)r+="<div>params[i].data.name}\n            <br/>\n            <strong>Abs Mutation:</strong> ".concat(e[s].data.mutation_abs,"<br/>\n            <strong>Abs Mutation in 3' end:</strong> ").concat(e[s].data.mutation3_abs,"<br/>\n            <strong>Mutation %:</strong> ").concat(e[s].data.mutation_pct,"<br/>\n            <strong>Mutation % in 3' end:</strong> ").concat(e[s].data.mutation3_pct,"</div><br/>");return r},position:function(e,t,a,n,r){var l={top:10};return l[["left","right"][+(e[0]<r.viewSize[0]/2)]]=30,l}},legend:{data:l,orient:"vertical",type:"scroll",top:"5%",right:0},axisPointer:{link:{xAxisIndex:"all"}},dataZoom:[{type:"slider",show:!0,realtime:!0,start:b,end:h,xAxisIndex:[0,1],top:"92%"},{type:"inside",realtime:!0,start:b,end:h,xAxisIndex:[0,1]}],grid:[{bottom:"60%",right:"15%"},{top:"57%",right:"15%"}],xAxis:[{name:"date",gridIndex:0,type:"category"},{name:"date",gridIndex:1,type:"category"}],yAxis:[{name:"Total Percentage (%)",gridIndex:0,nameLocation:"middle",nameGap:25},{name:"Total Percentage (%)",gridIndex:1,nameLocation:"middle",nameGap:25}],dataset:x,series:[].concat(Object(u.a)(E),Object(u.a)(y))};var S={click:function(e){console.log(e)},legendselectchanged:function(e){e.selected},dataZoom:function(e,t,a){var n;return function(){var r=this,l=arguments,s=function(){n=null,a||e.apply(r,l)},c=a&&!n;clearTimeout(n),n=setTimeout(s,t),c&&e.apply(r,l)}}((function(e){var t=e;void 0!==e.batch&&(t=e.batch[0]);var a=Math.floor(s.length*t.start/100),n=Math.floor(s.length*t.end/100),r=s[a]||s[0],l=s[n]||s[s.length-1],o=new Date(r),i=new Date(l);o.setDate(o.getDate()),i.setDate(i.getDate()),console.log("startDate endDate :>> ",o,i),c([o,i])}),800)};return r.a.createElement(Z.a,{option:O,style:{height:"475px",width:"100%"},onEvents:S,notMerge:!0})},Q=function(e){var t=e.title,a=e.title2,n=e.data,l=e.showAbsDiff,s=e.subtitle,c=void 0===s?"":s,o=e.subtitle2,i=void 0===o?"":o;function m(e,t,a){return{show:!0,position:"insideTop",distance:10,align:"center",verticalAlign:"top",rotate:0,formatter:function(n){if(!l)return"".concat(n.data[a],"%");var r=n.data.name,s=e[t].filter((function(e){return e.name===r}))[0][a]-e[t-1].filter((function(e){return e.name===r}))[0][a];return"".concat(s>0?"{p|+":"{n|").concat(s.toFixed(2),"%}")},fontSize:9,backgroundColor:"#232323",textBorderColor:"transparent",padding:[4,5,2,5],rich:{p:{color:"#88ff88",fontSize:9},n:{color:"#ff8677",fontSize:9}}}}function d(e,t,a,n){for(var r=[],l=1;l<e.length;l++)r.push({name:e[l][0].date,type:"bar",barMaxWidth:40,xAxisIndex:a,yAxisIndex:n,label:m(e,l,t),encode:{x:"name",y:t},datasetIndex:l});return r}var p=function(e){var t,a=[],n=Object(v.a)(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;a.push({dimensions:["countries_considered","date","mutation3_abs","mutation3_pct","mutation_abs","mutation_pct","name","submission_count"],source:r})}}catch(l){n.e(l)}finally{n.f()}return a}(n),f=d(n,"mutation_pct",0,0),g=d(n,"mutation3_pct",1,1);console.log("dataset :>> ",p),console.log("mutation :>> ",f),console.log("mutation3 :>> ",g);var b={title:[{text:t,subtext:c,left:"center"},{text:a,subtext:i,left:"center",top:"middle"}],tooltip:{trigger:"axis",axisPointer:{type:"shadow",animation:!1},position:function(e,t,a,n,r){var l={top:10};return l[["left","right"][+(e[0]<r.viewSize[0]/2)]]=30,l}},axisPointer:{link:{xAxisIndex:"all"}},grid:[{bottom:"60%"},{top:"57%"}],xAxis:[{name:"primers",gridIndex:0,type:"category"},{name:"primers",gridIndex:1,type:"category"}],yAxis:[{name:"Total Percentage (%)",gridIndex:0,nameLocation:"middle",nameGap:50},{name:"Total Percentage (%)",gridIndex:1,nameLocation:"middle",nameGap:50}],dataset:p,series:[].concat(Object(u.a)(f),Object(u.a)(g))},h={click:function(e){console.log(e)}};return r.a.createElement(Z.a,{option:b,style:{height:"500px",width:"100%"},notMerge:!0,onEvents:h})},X=a(698),ee=a(30),te=a(131),ae=a(317),ne=(a(682),Object(X.a)().domain([0,1]).range(["#ffedea","#ff5233"])),re=function(e){var t=e.title,a=e.setTooltipContent,n=e.data,l=e.lookBack,s=e.db,o=e.timeFrameBrush,i=e.setTimeFrameBrush,m=r.a.useState([]),d=Object(c.a)(m,2),p=d[0],g=d[1];function b(e){return new Date(e).toISOString().slice(0,10)}var h=function(e,t){return 0===e.length?[Object.keys(t)[0],Object.keys(t)[Object.keys(t).length-1]]:[b(e[0]),b(e[1])]}(o,s),E=Object(c.a)(h,2),y=E[0],x=E[1],O=function(e,t,a){var n=e;if(t>0){var r=new Date(a),l=new Date(a);l.setDate(l.getDate()-t),n=e.filter((function(e){var t=new Date(e.date);return t.getTime()<=r.getTime()&&t.getTime()>=l.getTime()}))}return n.reduce((function(e,t){return e.has(t.ISO_A3)?e.set(t.ISO_A3,e.get(t.ISO_A3)+1):e.set(t.ISO_A3,1),e}),new Map)}(n,l,x),S=Array.from(O.keys()).reduce((function(e,t){return e.set(t,(O.get(t)/(s[x][t]||100)*100).toFixed(2)),e}),new Map);console.log("countryMisses :>> ",O),console.log("startDate, endDate :>> ",y,x),console.log("countryMissesPct :>> ",S);var C=Math.max.apply(Math,Object(u.a)(Array.from(S.values())));return console.log("maxPctMiss :>> ",C),r.a.createElement(f.a,null,r.a.createElement("h2",{className:"map-title"},t),r.a.createElement(te.ComposableMap,{"data-tip":"",projectionConfig:{scale:200}},r.a.createElement(te.ZoomableGroup,null,r.a.createElement(te.Geographies,{geography:"https://raw.githubusercontent.com/zcreativelabs/react-simple-maps/master/topojson-maps/world-110m.json"},(function(e){return e.geographies.map((function(e){var t=O.get(e.properties.ISO_A3)||0,c=S.get(e.properties.ISO_A3)||0;return r.a.createElement(te.Geography,{key:e.rsmKey,geography:e,onMouseEnter:function(){var n=e.properties.NAME;a("".concat(n,": <br/> \n                        ").concat(s[x][e.properties.ISO_A3]||0," submissions <br/>\n                        ").concat(t," Absolute Misses.<br/> \n                        ").concat(c,"% Miss <br/>\n                        "))},onMouseLeave:function(){a("")},onClick:function(){!function(e,t,a){if(-1===a){var n=Object(ee.b)(t.reduce((function(t,a){return a.ISO_A3===e?(t.push(new Date(a.date)),t):t}),[]));if(void 0===n[0])return;if(n[0]===n[1]){var r=new Date(n[1]),l=new Date(n[1]);r.setHours(r.getHours()+23),l.setHours(l.getHours()-23),i([l,r])}else i(n)}}(e.properties.ISO_A3,n,l)},style:{default:{fill:0!==parseFloat(c)?ne(c/C):"#949494",outline:"none"},hover:{fill:"#afca9d",cursor:t?"pointer":"auto",outline:"none"}}})}))})))),r.a.createElement(J.CSVLink,{data:p,headers:[{label:"Country",key:"country"},{label:"ISO A3",key:"ISO_A3"},{label:"Missed %",key:"missed_pct"},{label:"Absolute Misses",key:"abs_miss"},{label:"Submitted Virus",key:"country_total"},{label:"Start Date",key:"startDate"},{label:"End Date",key:"endDate"}],filename:"geo_misses.csv",className:"btn btn-dark",target:"_blank",onClick:function(e,t,a,n,r){return function(){var l,s=[],o=Object(v.a)(e);try{var i=function(){var e=Object(c.a)(l.value,2),o=e[0],i=e[1];s.push({country:r.find((function(e){return e.ISO_A3===o})).country_name,ISO_A3:o,country_total:i/(t.get(o)/100),missed_pct:t.get(o),abs_miss:i,startDate:a,endDate:n})};for(o.s();!(l=o.n()).done;)i()}catch(u){o.e(u)}finally{o.f()}console.log("fired",s),g(s)}}(O,S,y,x,n)},"Download Map Data"))},le=function(e){var t=e.title,a=e.data,n=e.lookBack,l=e.db,s=e.timeFrameBrush,o=e.setTimeFrameBrush,i=r.a.useState(""),u=Object(c.a)(i,2),m=u[0],d=u[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(re,{title:t,setTooltipContent:d,data:a,lookBack:n,db:l,timeFrameBrush:s,setTimeFrameBrush:o}),r.a.createElement(ae.a,{html:!0},m))};Date.prototype.sameDay=function(e){return this.getFullYear()===e.getFullYear()&&this.getDate()===e.getDate()&&this.getMonth()===e.getMonth()};var se=function(){var e=Object(i.f)();return r.a.createElement(f.a,null,r.a.createElement("p",{className:"no-data"},"Please make sure that you've uploaded some data first!"),r.a.createElement(p.a,{onClick:function(){return e.push("/")}},"Upload Data"))},ce=function(e){var t=e.results,a=r.a.useRef(JSON.parse(t));console.log("result",a);var n=r.a.useRef(a.current[0]||{}),l=r.a.useRef(function(e){var t=[];if(0!==Object.keys(e).length)for(var a=Object.keys(e),n=0,r=a;n<r.length;n++){var l=r[n];t.push.apply(t,Object(u.a)(e[l].map(ue(l))))}return t}(n.current)),s=r.a.useRef(ie(a.current,1)),o=r.a.useRef(ie(a.current,0)),m=r.a.useRef(Object.keys(o.current)||[]),p=(Object(i.g)().display.split("&"),r.a.useState([])),b=Object(c.a)(p,2),h=b[0],E=b[1],y=r.a.useState([]),x=Object(c.a)(y,2),O=x[0],S=x[1],w=r.a.useState([]),T=Object(c.a)(w,2),j=T[0],k=T[1],D=r.a.useState(r.a.useMemo((function(){return[]}),[])),N=Object(c.a)(D,2),F=N[0],_=N[1],M=r.a.useState(r.a.useMemo((function(){return[]}),[])),A=Object(c.a)(M,2),P=A[0],B=A[1],I=r.a.useState(r.a.useMemo((function(){return[]}),[])),G=Object(c.a)(I,2),z=G[0],H=G[1],R=r.a.useState([]),V=Object(c.a)(R,2),q=V[0],J=V[1],W=r.a.useState(!1),U=Object(c.a)(W,2),Y=U[0],Z=U[1],X=r.a.useState(!1),ee=Object(c.a)(X,2),te=ee[0],ae=ee[1],ne=r.a.useState(6),re=Object(c.a)(ne,2),ce=re[0],pe=re[1],ge=r.a.useState(!1),be=Object(c.a)(ge,2),he=be[0],ve=be[1],Ee=r.a.useState(ce),ye=Object(c.a)(Ee,2),xe=ye[0],Oe=ye[1],Se=r.a.useState(1),Ce=Object(c.a)(Se,2),we=Ce[0],Te=Ce[1],je=r.a.useState(!1),ke=Object(c.a)(je,2),De=ke[0],Ne=ke[1],Fe=r.a.useState(!1),_e=Object(c.a)(Fe,2),Me=_e[0],Ae=_e[1],Pe=r.a.useState(!1),Be=Object(c.a)(Pe,2),Ie=Be[0],Ge=Be[1];r.a.useEffect((function(){setTimeout((function(){return Ge(!1)}),500)}),[Ie]);var ze=r.a.useMemo((function(){return[{Header:"Primer",accessor:"primer",disableFilters:!0},{Header:"Accession ID",accessor:"accession_id",disableFilters:!0},{Header:"Virus Name",accessor:"virus_name",disableFilters:!0,width:200},{Header:"Diagram",accessor:"match_diag",disableFilters:!0,width:450},{Header:"Primer Type",accessor:"type",disableFilters:!0,width:120},{Header:"Homology %",accessor:"match_pct"},{Header:"Total Miss",accessor:"misses"},{Header:"Misses In 3' End",accessor:"misses3"},{Header:"Date Collected",accessor:"date",disableFilters:!0,width:140,show:!1},{Header:"Country",accessor:"country_name",disableFilters:!0}]}),[]),He=r.a.useMemo((function(){return[{Header:"Primer",accessor:"primer",disableFilters:!0},{Header:"Accession ID",accessor:"accession_id",disableFilters:!0},{Header:"Virus Name",accessor:"virus_name",disableFilters:!0,width:200},{Header:"Date Collected",accessor:"date",disableFilters:!0,width:140,show:!1},{Header:"Country",accessor:"country_name",disableFilters:!0}]}),[]),Re=r.a.useMemo((function(){return Y?o.current:function(e,t,a){var n,r={},l=Object(v.a)(a);try{for(l.s();!(n=l.n()).done;){var s=n.value,c=new Date(s),o=new Date(s);o.setDate(o.getDate()-t);for(var i={total:0},u=o;u<=c;u.setDate(u.getDate()+1)){var m=u.toISOString().slice(0,10);i=de(i,e[m]||{})}r[s]=i}}catch(d){l.e(d)}finally{l.f()}return r}(s.current,ce,m.current)}),[Y,ce]);console.log("dbActual  :>> ",Re);var Le=r.a.useMemo((function(){return l.current.filter(oe({primers:z,pType:q,countries:P,miss:h,miss3:O,match:j}))}),[z,q,P,h,O,j]),Ve=r.a.useMemo((function(){return Le.filter(oe({timeFrameBrush:F}))}),[Le,F]),qe=r.a.useMemo((function(){return fe(Le,0===z.length?Object.keys(n.current):z,Re,m.current,Y,ce,te,P)}),[Le,z,Re,Y,ce,te,P]),Je=r.a.useMemo((function(){return he?function(e,t,a,n,r){var l=[],s=a[1]||new Date(t[t.length-1]),c=new Date(s);c.setDate(c.getDate()-n*r);for(;c.getTime()<new Date(t[0]);)c.setDate(c.getDate()+n);for(var o=function(t){for(var a=[],n=0;n<e.length;n++){var r=e[n].filter((function(e){return new Date(e.date).sameDay(t)}));a.push.apply(a,Object(u.a)(r))}l.push(a)},i=c;i<=s;i.setDate(i.getDate()+n))o(i);return l}(qe,m.current,F,xe,we):{}}),[qe,we,xe,F,he]),We=r.a.useMemo((function(){return function(e){var t=new Set,a=e.reduce((function(e,a){if(t.has(a.primer)){var n=e[a.primer];return n.push(a),e[a.primer]=n,e}return t.add(a.primer),e[a.primer]=[a],e}),{}),n=[];if(1===t.size)return[];if(t.size>1){var r=Object.keys(a);n=(n=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"accession_id",a=e[0],n=1;n<e.length;n++)a=me(a,e[n],t);return a}(Object.values(a))).map(ue(r.join(", ")))}return n}(JSON.parse(JSON.stringify(Le)))}),[Le]),Ue=r.a.useMemo((function(){return fe(We,0===z.length?[Object.keys(n.current).join(", ")]:[z.join(", ")],Re,m.current,Y,ce,te,P)}),[We,z,Re,Y,ce,te,P]),Ke=r.a.useMemo((function(){return We.filter(oe({timeFrameBrush:F}))}),[We,F]);return 0!==a.current.length?(console.log("graphOverview :>> ",qe),console.log("barData :>> ",Je),r.a.createElement("div",{className:"display-page"},r.a.createElement(f.a,null,r.a.createElement(L,{baseData:n.current,colNames:ze,timeFrameBrush:F,setTimeFrameBrush:_,lookBack:ce,setLookBack:pe,useCum:Y,setUseCum:Z,miss:h,setMiss:E,miss3:O,setMiss3:S,match:j,setMatch:k,countryAsTotal:te,setCountryAsTotal:ae,setCountries:B,setPrimers:H,setPType:J,isProcessing:Ie,setIsProcessing:Ge,isBar:he,setIsBar:ve,daysBetweenComparison:xe,setDaysBetweenComparison:Oe,numberOfBars:we,setNumberOfBars:Te,showAbsDiff:De,setShowAbsDiff:Ne,showDailyGraph:Me,setShowDailyGraph:Ae}),r.a.createElement(K,{id:"collapse-table",title:"Overview of Missed Viruses",data:Ve,columns:ze,isCombined:!1,isCollapsable:!0,className:"mb-5"}),r.a.createElement(d.a,{className:"mb-5"},r.a.createElement(C.a,{xs:12,lg:1===z.length?6:12},r.a.createElement($,{title:"Genomes with mutation",title2:"Genomes with mutation in 3' end",data:qe,primers:0===z.length?Object.keys(n.current):z,dates:m.current,setPrimers:H,timeFrameBrush:F,setTimeFrameBrush:_})),1===z.length?r.a.createElement(C.a,{xs:12,lg:6},r.a.createElement(le,{title:"Map of Virus Mutations",data:Ve,lookBack:Me?ce:-1,db:Me?s.current:o.current,timeFrameBrush:F,setTimeFrameBrush:_})):null),he?r.a.createElement(Q,{title:"Genomes with mutation",title2:"Percent of genomes with mutation in 3' end",data:Je,showAbsDiff:De,className:"mb-5"}):null,r.a.createElement(g.a,{in:0!==We.length},r.a.createElement("div",null,r.a.createElement(d.a,{className:"mb-5"},r.a.createElement(C.a,{xs:12,lg:6},r.a.createElement($,{title:"Genomes with mutation (Combined)",title2:"Genomes with mutation in 3' end (Combined)",data:Ue,primers:0===z.length?[Object.keys(n.current).join(", ")]:[z.join(", ")],dates:m.current,setPrimers:H,timeFrameBrush:F,setTimeFrameBrush:_})),r.a.createElement(C.a,{xs:12,lg:6},r.a.createElement(le,{title:"Map of Virus Mutations (Combined)",data:Ke,lookBack:Me?ce:-1,db:Me?s.current:o.current,timeFrameBrush:F,setTimeFrameBrush:_}))),r.a.createElement(K,{title:"Missed Viruses (Combined)",data:Ke,columns:He,isCombined:!0,isCollapsable:!0,className:"mb-5"})))))):r.a.createElement(se,null)},oe=function(e){var t=e.timeFrameBrush,a=void 0===t?[]:t,n=e.primers,r=void 0===n?[]:n,l=e.pType,s=void 0===l?[]:l,o=e.countries,i=void 0===o?[]:o,u=e.miss,m=void 0===u?[]:u,d=e.miss3,p=void 0===d?[]:d,f=e.match,g=void 0===f?[]:f;return function(e){var t=!0,n=!0,l=!0,o=!0,u=!0,d=!0,f=!0;if(0!==a.length){var b=new Date(e.date),h=Object(c.a)(a,2),v=h[0],E=h[1];t=b.getTime()>=new Date(v).getTime()&&b.getTime()<=new Date(E).getTime()}return 0!==r.length&&(n=r.includes(e.primer)),0!==s.length&&(l=s.includes(e.type)),0!==i.length&&(o=i.map((function(e){return e.label})).includes(e.country_name)),0!==m.length&&(console.log("miss :>> ",m),u=e.misses>=(m[0]||0)&&e.misses<=(m[1]||100)),0!==p.length&&(d=e.misses3>=(p[0]||0)&&e.misses3<=(p[1]||100)),0!==g.length&&(f=e.match_pct>=(g[0]||0)&&e.match_pct<=(g[1]||100)),t&&n&&l&&o&&u&&d&&f}};function ie(e,t){return 0!==e.length?JSON.parse(JSON.stringify(e[1][t])):{}}function ue(e){return function(t){return t.primer=e,t}}function me(e,t,a){var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(a){var r=e.filter((l=new Set(t.map((function(e){return e[a]}))),function(e){return n===l.has(e[a])}));return r}var l,s=e.filter(function(e){return function(t){return n===e.has(t)}}(new Set(t.map((function(e){return e})))));return s}function de(e,t){for(var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=0,r=Object.keys(t);n<r.length;n++){var l=r[n];e[l]=(e[l]||a)+t[l]}return e}function pe(e,t,a){return 0===t.length?e[a].total:t.reduce((function(t,n){return t+=e[a][n.value]||0}),0)}function fe(e,t,a,n,r,l,s){var c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:[],o=[];if(0===e.length)return o;var i,u=Object(v.a)(t);try{var m=function(){var t=i.value;o.push(n.map((function(n){var o=new Date(n),i=new Date(n);i.setDate(i.getDate()-l);var u=e.filter((function(e){var a=new Date(e.date);return r?a.getTime()<=o.getTime()&&e.primer===t:a.getTime()<=o.getTime()&&a.getTime()>=i.getTime()&&e.primer===t})).length,m=e.filter((function(e){var a=new Date(e.date);return r?a.getTime()<=o.getTime()&&e.primer===t&&0!==e.misses3:a.getTime()<=o.getTime()&&a.getTime()>=i.getTime()&&e.primer===t&&0!==e.misses3})).length,d=s?pe(a,c,n):a[n].total;return{date:n,name:t,mutation_pct:(u/d*100).toFixed(3),mutation3_pct:(m/d*100).toFixed(3),mutation_abs:u,mutation3_abs:m,submission_count:d,countries_considered:c}})))};for(u.s();!(i=u.n()).done;)m()}catch(d){u.e(d)}finally{u.f()}return o}a(683),a(684);var ge=function(){var e=Object(n.useState)("[]"),t=Object(c.a)(e,2),a=t[0],l=t[1];return r.a.createElement(o.a,{basename:"/METHODS/corona/gamma/primer/build"},r.a.createElement(o.b,{to:"/",style:{textDecoration:"none"}},r.a.createElement("h1",{className:"title"},"Primer Checker")),r.a.createElement(i.c,null,r.a.createElement(i.a,{exact:!0,path:"/"},r.a.createElement(_,{setResults:l})),r.a.createElement(i.a,{exact:!0,path:"/results/:display"},r.a.createElement(ce,{results:a})),r.a.createElement(i.a,{path:"/results"},r.a.createElement(ce,{results:a})),r.a.createElement(i.a,{path:"/"},r.a.createElement("div",null,"404: Page not found"))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(ge,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[322,1,2]]]);
//# sourceMappingURL=main.fcb0cb8b.chunk.js.map