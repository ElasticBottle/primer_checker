{"version":3,"sources":["../webpack/bootstrap","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","components/util.js","pages/results/dataFilter.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","_arrayLikeToArray","arr","len","length","arr2","Array","_unsupportedIterableToArray","minLen","toString","slice","constructor","from","test","_toConsumableArray","isArray","iter","iterator","TypeError","_defineProperty","obj","configurable","writable","ownKeys","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","push","apply","_objectSpread2","target","arguments","source","forEach","getOwnPropertyDescriptors","defineProperties","_createForOfIteratorHelper","F","done","e","_e","f","it","err","normalCompletion","didErr","step","next","_e2","_slicedToArray","_arr","_n","_d","undefined","_s","_i","addName","primer","dataFilter","timeFrameBrush","primers","pType","countries","miss","miss3","match","isWithinTimeFrame","isPrimer","isPType","isCountry","isMiss","isMiss3","isMatch","currDate","Date","date","startDate","endDate","getTime","includes","type","map","val","ISO_A3","misses","misses3","match_pct","filterTable","baseTableData","addObject","obj1","obj2","initialSum","results","subObject","getCountriesTotal","dbCount","total","reduce","prevVal","country","getTotalSubmission","dbDaily","dbCum","dateRange","countryAsTotal","useCum","lookBack","separate","result","dates","now","start","end","setDate","getDate","nowStr","toISOString","dateWindowCum","JSON","parse","stringify","dateStr","prevStr","toRemove","getRangeDbCount","console","log","combineData","data1","data2","mutation_abs","m3","mutation3_abs","mutation3_pct","submission_count","mutation_pct","countries_considered","Error","accumulate","data","buildLineGraphData","toPlot","totalSubmission","filteredData","currVal","add","virus_name","Set","size","getLineGraphData","baseData","find","getCombinedLineData","makeBarData","daysBetweenComparison","numberOfBars","differenceInDays","currDb","db","toReturn","getDb","has","set","Map","values","findIntersection","list1","list2","intersect","item","makeIntersection","tableData","primerNames","intersection","join","itemList","numList","findListIntersection"],"mappings":"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","file":"8524ab9f0638a318fb7f.worker.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"https://mendel3.bii.a-star.edu.sg/METHODS/corona/gamma/primer/build/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","export default function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}","import arrayLikeToArray from \"./arrayLikeToArray\";\nexport default function _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(n);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}","import arrayWithoutHoles from \"./arrayWithoutHoles\";\nimport iterableToArray from \"./iterableToArray\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray\";\nimport nonIterableSpread from \"./nonIterableSpread\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}","import arrayLikeToArray from \"./arrayLikeToArray\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","import defineProperty from \"./defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nexport default function _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}","import unsupportedIterableToArray from \"./unsupportedIterableToArray\";\nexport default function _createForOfIteratorHelper(o) {\n  if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) {\n    if (Array.isArray(o) || (o = unsupportedIterableToArray(o))) {\n      var i = 0;\n\n      var F = function F() {};\n\n      return {\n        s: F,\n        n: function n() {\n          if (i >= o.length) return {\n            done: true\n          };\n          return {\n            done: false,\n            value: o[i++]\n          };\n        },\n        e: function e(_e) {\n          throw _e;\n        },\n        f: F\n      };\n    }\n\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  var it,\n      normalCompletion = true,\n      didErr = false,\n      err;\n  return {\n    s: function s() {\n      it = o[Symbol.iterator]();\n    },\n    n: function n() {\n      var step = it.next();\n      normalCompletion = step.done;\n      return step;\n    },\n    e: function e(_e2) {\n      didErr = true;\n      err = _e2;\n    },\n    f: function f() {\n      try {\n        if (!normalCompletion && it[\"return\"] != null) it[\"return\"]();\n      } finally {\n        if (didErr) throw err;\n      }\n    }\n  };\n}","import arrayWithHoles from \"./arrayWithHoles\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray\";\nimport nonIterableRest from \"./nonIterableRest\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","export const validateFormat = (content) => {\r\n  let format = /^(>fwd|>rev|>prb)[\\s\\S]{1,2}[ACGTacgt]+[\\s\\S]{1,2}(>fwd|>rev|>prb)[\\s\\S]{1,2}[ACGTacgt]+[\\s\\S]{1,2}(>fwd|>rev|>prb)[\\s\\S]{1,2}[ACGTacgt]+[\\s\\S]{1,2}$/;\r\n  let format2 = /^(>fwd|>rev|>prb)[\\s\\S]{1,2}[ACGTacgt]+[\\s\\S]{1,2}(>fwd|>rev|>prb)[\\s\\S]{1,2}[ACGTacgt]+[\\s\\S]{1,2}$/;\r\n  let correct_format = format.exec(content);\r\n  let correct_format2 = format2.exec(content);\r\n  return correct_format !== null || correct_format2 !== null;\r\n};\r\n\r\nexport const getRandomInt = (min, max) => {\r\n  const lower_r = Math.floor(min);\r\n  const upper_r = Math.floor(max);\r\n  return Math.floor(lower_r + Math.random() * (upper_r - lower_r));\r\n};\r\n\r\n// credit: https://davidwalsh.name/function-debounce\r\n// Returns a function, that, as long as it continues to be invoked, will not\r\n// be triggered. The function will be called after it stops being called for\r\n// N milliseconds. If `immediate` is passed, trigger the function on the\r\n// leading edge, instead of the trailing.\r\nexport function debounce(func, wait, immediate) {\r\n  let timeout;\r\n  return function () {\r\n    let context = this,\r\n      args = arguments;\r\n    let later = function () {\r\n      timeout = null;\r\n      if (!immediate) func.apply(context, args);\r\n    };\r\n    let callNow = immediate && !timeout;\r\n    clearTimeout(timeout);\r\n    timeout = setTimeout(later, wait);\r\n    if (callNow) func.apply(context, args);\r\n  };\r\n}\r\n\r\nexport function addName(primer) {\r\n  /**\r\n   * An annealing function that takes an object and adds [primer] to it with key under \"primer\"\r\n   * @param {string} primer: value to be added\r\n   * @returns {function} a function that takes in [value] and returns it after adding [primer] to it.\r\n   */\r\n  return (value) => {\r\n    value.primer = primer;\r\n    return value;\r\n  };\r\n}\r\n\r\nexport function makeBaseGraphData(baseData) {\r\n  /**\r\n   * Converts the incoming {primerName: Missed virus} to\r\n   * {primerName: Date: Missed Virus}\r\n   *\r\n   * @param {Object} baseData: contains the primerDetails\r\n   * @returns {Object}: Mapping from {primerName: Date: Missed Virus}\r\n   */\r\n\r\n  const toReturn = {};\r\n  for (const primerName of Object.keys(baseData)) {\r\n    const result = {};\r\n    for (const details of baseData[primerName]) {\r\n      const toAdd = result[details.date] || [];\r\n      toAdd.push(addName(primerName)(details));\r\n      result[details.date] = toAdd;\r\n    }\r\n    toReturn[primerName] = result;\r\n  }\r\n  return toReturn;\r\n}\r\n","import { addName } from \"../../components/util\";\r\n\r\nconst dataFilter = ({\r\n  timeFrameBrush = [],\r\n  primers = [],\r\n  pType = [],\r\n  countries = [],\r\n  miss = [],\r\n  miss3 = [],\r\n  match = [],\r\n}) => {\r\n  /**\r\n   * A filter for gisaid table data in records orientation (list of objects where column names are mapped to their value for that row)\r\n   * @param {Array} timeFrameBrush: the min and max timeFrame for the sequence\r\n   * @param {Array} primers: specific name for a particular primer\r\n   * @param {Array} pType: the primer type, one of [\"fwd\", \"rev\", \"prb\"]\r\n   * @param {Array} countries: the list of country that the seq must be from\r\n   * @param {Array} miss:  the min and max misses for the sequence\r\n   * @param {Array} miss3: the min and max misses in 3' end\r\n   * @param {Array} match: the min and max homolog %\r\n   * @returns {function} A function that takes a value and filter for parameters aboves\r\n   */\r\n  return (value) => {\r\n    let isWithinTimeFrame = true;\r\n    let isPrimer = true;\r\n    let isPType = true;\r\n    let isCountry = true;\r\n    let isMiss = true;\r\n    let isMiss3 = true;\r\n    let isMatch = true;\r\n\r\n    if (timeFrameBrush.length !== 0) {\r\n      const currDate = new Date(value.date);\r\n      const [startDate, endDate] = timeFrameBrush;\r\n      isWithinTimeFrame =\r\n        currDate.getTime() >= new Date(startDate).getTime() &&\r\n        currDate.getTime() <= new Date(endDate).getTime();\r\n    }\r\n    if (primers.length !== 0) {\r\n      isPrimer = primers.includes(value.primer);\r\n    }\r\n    if (pType.length !== 0) {\r\n      isPType = pType.includes(value.type);\r\n    }\r\n    if (countries.length !== 0) {\r\n      isCountry = countries.map((val) => val.value).includes(value.ISO_A3);\r\n    }\r\n    if (miss.length !== 0) {\r\n      isMiss =\r\n        value.misses >= (miss[0] || 0) && value.misses <= (miss[1] || 100);\r\n    }\r\n    if (miss3.length !== 0) {\r\n      isMiss3 =\r\n        value.misses3 >= (miss3[0] || 0) && value.misses3 <= (miss3[1] || 100);\r\n    }\r\n    if (match.length !== 0) {\r\n      isMatch =\r\n        value.match_pct >= (match[0] || 0) &&\r\n        value.match_pct <= (match[1] || 100);\r\n    }\r\n    return (\r\n      isWithinTimeFrame &&\r\n      isPrimer &&\r\n      isPType &&\r\n      isCountry &&\r\n      isMiss &&\r\n      isMiss3 &&\r\n      isMatch\r\n    );\r\n  };\r\n};\r\n\r\nexport function filterTable({\r\n  baseTableData,\r\n  timeFrameBrush = [],\r\n  primers = [],\r\n  pType = [],\r\n  countries = [],\r\n  miss = [],\r\n  miss3 = [],\r\n  match = [],\r\n}) {\r\n  return baseTableData.filter(\r\n    dataFilter({\r\n      primers: primers,\r\n      pType: pType,\r\n      countries: countries,\r\n      miss: miss,\r\n      miss3: miss3,\r\n      match: match,\r\n      timeFrameBrush: timeFrameBrush,\r\n    })\r\n  );\r\n}\r\nfunction addObject(obj1, obj2, initialSum = 0) {\r\n  /**\r\n   * Adds the item in obj2 into obj1\r\n   * @param {Object} obj1: the obj in which items will be added too.\r\n   * @param {Object} obj2: The Object from which are retrieved to be added.\r\n   * @param {Any} initialSum: the value to be added when Obj2 contains an item Obj1 does not.\r\n   * @returns {Object} An object containing Obj1 + Obj2\r\n   */\r\n  let results = {};\r\n\r\n  for (let key of Object.keys(obj2)) {\r\n    results[key] = (obj1[key] || initialSum) + obj2[key];\r\n  }\r\n  return results;\r\n}\r\n\r\nfunction subObject(obj1, obj2) {\r\n  /**\r\n   * Subtracts the item in obj2 from obj1\r\n   * @param {Object} obj1: the obj in which items will be removed from.\r\n   * @param {Object} obj2: The Object from which items are retrieved to be removed.\r\n   * @returns {Object} An object containing Obj1 + Obj2\r\n   */\r\n  let results = {};\r\n  for (const key of Object.keys(obj2)) {\r\n    results[key] = obj1[key] - obj2[key];\r\n  }\r\n  return results;\r\n}\r\nfunction getRangeDbCount(dbCount, lookBack, dates) {\r\n  /**\r\n   * Calculates a rolling window for database\r\n   * @param {Object} dbCount: Contains the virus numbers in date -> country -> count order\r\n   * @param {Number} lookBack: the lookBack period. Only has effect if [useCum] is false\r\n   */\r\n\r\n  const now = new Date(dates[0]);\r\n  const start = new Date(now);\r\n  const end = new Date(dates[dates.length - 1]);\r\n  start.setDate(start.getDate() + lookBack);\r\n  const nowStr = now.toISOString().slice(0, 10);\r\n  const dateWindowCum = {};\r\n  dateWindowCum[nowStr] = JSON.parse(JSON.stringify(dbCount[nowStr]));\r\n  now.setDate(now.getDate() + 1);\r\n\r\n  for (let d = now; d <= start; d.setDate(d.getDate() + 1)) {\r\n    const dateStr = d.toISOString().slice(0, 10);\r\n\r\n    let prevStr = new Date(d);\r\n    prevStr.setDate(prevStr.getDate() - 1);\r\n    prevStr = prevStr.toISOString().slice(0, 10);\r\n\r\n    dateWindowCum[dateStr] = addObject(\r\n      dateWindowCum[prevStr],\r\n      dbCount[dateStr] || {}\r\n    );\r\n  }\r\n\r\n  start.setDate(start.getDate() + 1);\r\n  for (let d = start; d <= end; d.setDate(d.getDate() + 1)) {\r\n    const dateStr = d.toISOString().slice(0, 10);\r\n    let prevVal = new Date(d);\r\n    prevVal.setDate(prevVal.getDate() - 1);\r\n    let toRemove = new Date(prevVal);\r\n    toRemove.setDate(toRemove.getDate() - lookBack);\r\n\r\n    prevVal = prevVal.toISOString().slice(0, 10);\r\n    toRemove = toRemove.toISOString().slice(0, 10);\r\n\r\n    dateWindowCum[dateStr] = addObject(\r\n      subObject(dateWindowCum[prevVal], dbCount[toRemove]),\r\n      dbCount[dateStr] || {}\r\n    );\r\n  }\r\n\r\n  return dateWindowCum;\r\n}\r\n\r\nfunction getCountriesTotal(dbCount, countries, date) {\r\n  /**\r\n   * Retrieve the total number of submissions by [countries] on [date]\r\n   * @param {Object} dbCount: Maps date -> Object [country alpha 3 -> submission count]\r\n   * @param {Array} countries: list of countries\r\n   * @param {string} date: the date to obtain submission count for\r\n   * @returns {Number} the total number of submissions by [countries] on [date]\r\n   */\r\n  if (countries.length === 0) {\r\n    return dbCount[date].total;\r\n  }\r\n  const total = countries.reduce((prevVal, country) => {\r\n    prevVal += dbCount[date][country.value] || 0;\r\n    return prevVal;\r\n  }, 0);\r\n  return total;\r\n}\r\n\r\nexport function getTotalSubmission({\r\n  dbDaily,\r\n  dbCum,\r\n  dateRange,\r\n  countries,\r\n  countryAsTotal,\r\n  useCum,\r\n  lookBack,\r\n  separate = false,\r\n}) {\r\n  if (useCum) {\r\n    const result = {};\r\n    for (const date of Object.keys(dbCum)) {\r\n      result[date] = countryAsTotal\r\n        ? getCountriesTotal(dbCum, countries, date)\r\n        : dbCum[date].total;\r\n    }\r\n    return result;\r\n  } else {\r\n    const result = getRangeDbCount(dbDaily, lookBack, dateRange);\r\n    console.log(\"result :>> \", result);\r\n    console.log(\"dateRange :>> \", dateRange);\r\n    console.log(\"dbDaily :>> \", dbDaily);\r\n    if (separate) {\r\n      return result;\r\n    }\r\n    for (const date of dateRange) {\r\n      result[date] = countryAsTotal\r\n        ? getCountriesTotal(result, countries, date)\r\n        : result[date].total;\r\n    }\r\n    return result;\r\n  }\r\n}\r\n\r\nfunction combineData(f, data1, data2) {\r\n  /** combines two single graph data overview\r\n   * @param (string) f: Either \"add\" or \"subtract\"\r\n   * @param {Object} data1: The object we are adding to or subtracting from\r\n   * @param {Object} data2: The data we are using to add or subtract\r\n   * @returns {Object}: The combined result\r\n   */\r\n  if (f === \"add\") {\r\n    const m = data1.mutation_abs + data2.mutation_abs;\r\n    const m3 = data1.mutation3_abs + data2.mutation3_abs;\r\n    return {\r\n      name: data1.name,\r\n      date: data1.date,\r\n      mutation3_abs: m3,\r\n      mutation3_pct: (m3 / data1.submission_count || 0) * 100,\r\n      mutation_abs: m,\r\n      mutation_pct: (m / data1.submission_count || 0) * 100,\r\n      submission_count: data1.submission_count,\r\n      countries_considered: data1.countries_considered,\r\n      lookBack: data1.lookBack,\r\n    };\r\n  } else if (f === \"subtract\") {\r\n    const m = data1.mutation_abs - data2.mutation_abs;\r\n    const m3 = data1.mutation3_abs - data2.mutation3_abs;\r\n    return {\r\n      name: data1.name,\r\n      date: data1.date,\r\n      mutation3_abs: m3,\r\n      mutation3_pct: (m3 / data1.submission_count || 0) * 100,\r\n      mutation_abs: m,\r\n      mutation_pct: (m / data1.submission_count || 0) * 100,\r\n      submission_count: data1.submission_count,\r\n      countries_considered: data1.countries_considered,\r\n      lookBack: data1.lookBack,\r\n    };\r\n  } else {\r\n    throw Error(`invalid f, expected \"add\" or \"subtract\", got ${f}`);\r\n  }\r\n}\r\nfunction accumulate(data, lookBack) {\r\n  /**\r\n   * Sliding window over the list of dates for a particular primer\r\n   * @param {Array} data: Contains a list of virus sequences missed\r\n   * @param {Number} lookBack: the lookBack period for the calculation\r\n   * @returns {Array}: a list of data points to be plotted for the line graph.\r\n   */\r\n  const result = [];\r\n  result.push({\r\n    name: data[0].name,\r\n    date: data[0].date,\r\n    mutation3_abs: data[0].mutation3_abs,\r\n    mutation3_pct:\r\n      (data[0].mutation3_abs / data[0].submission_count || 0) * 100,\r\n    mutation_abs: data[0].mutation_abs,\r\n    mutation_pct: (data[0].mutation_abs / data[0].submission_count || 0) * 100,\r\n    submission_count: data[0].submission_count,\r\n    countries_considered: data[0].countries_considered,\r\n    lookBack: data[0].lookBack,\r\n  });\r\n  if (lookBack === -1) {\r\n    for (let i = 1; i < data.length; i++) {\r\n      result.push(combineData(\"add\", data[i], result[i - 1]));\r\n    }\r\n  } else {\r\n    for (let i = 1; i <= lookBack; i++) {\r\n      result.push(combineData(\"add\", data[i], result[i - 1]));\r\n    }\r\n    for (let i = lookBack + 1; i < data.length; i++) {\r\n      result.push(\r\n        combineData(\r\n          \"add\",\r\n          data[i],\r\n          combineData(\"subtract\", result[i - 1], data[i - 1 - lookBack])\r\n        )\r\n      );\r\n    }\r\n  }\r\n  return result;\r\n}\r\nfunction buildLineGraphData({\r\n  toPlot,\r\n  primers,\r\n  dateRange,\r\n  pType,\r\n  countries,\r\n  miss,\r\n  miss3,\r\n  match,\r\n  totalSubmission,\r\n  useCum,\r\n  lookBack,\r\n}) {\r\n  const results = [];\r\n  for (const primer of primers) {\r\n    results.push(\r\n      dateRange.map((date) => {\r\n        const filteredData = (toPlot[primer][date] || []).reduce(\r\n          (prevVal, currVal) => {\r\n            if (\r\n              dataFilter({\r\n                pType: pType,\r\n                countries: countries,\r\n                miss: miss,\r\n                miss3: miss3,\r\n                match: match,\r\n              })(currVal)\r\n            ) {\r\n              prevVal[0].add(currVal.virus_name);\r\n              if (currVal.misses3 >= 1) {\r\n                prevVal[1].add(currVal.virus_name);\r\n              }\r\n            }\r\n            return prevVal;\r\n          },\r\n          [new Set(), new Set()]\r\n        );\r\n        return {\r\n          name: primer,\r\n          date: date,\r\n          mutation3_abs: filteredData[1].size,\r\n          mutation3_pct: 0,\r\n          mutation_abs: filteredData[0].size,\r\n          mutation_pct: 0,\r\n          submission_count: totalSubmission[date],\r\n          countries_considered: countries,\r\n          lookBack: useCum ? -1 : lookBack,\r\n        };\r\n      })\r\n    );\r\n  }\r\n\r\n  return useCum\r\n    ? results.map((result) => {\r\n        return accumulate(result, -1);\r\n      })\r\n    : results.map((result) => {\r\n        return accumulate(result, lookBack);\r\n      });\r\n}\r\nexport function getLineGraphData({\r\n  baseData,\r\n  dateRange,\r\n  primers,\r\n  pType,\r\n  countries,\r\n  miss,\r\n  miss3,\r\n  match,\r\n  totalSubmission,\r\n  useCum,\r\n  lookBack,\r\n}) {\r\n  const toPlot = {};\r\n  for (const primer of Object.keys(baseData)) {\r\n    if (primers.length === 0) {\r\n      toPlot[primer] = baseData[primer];\r\n    } else if (primers.find((val) => val === primer)) {\r\n      toPlot[primer] = baseData[primer];\r\n    }\r\n  }\r\n  return buildLineGraphData({\r\n    toPlot: toPlot,\r\n    primers: primers.length === 0 ? Object.keys(baseData) : primers,\r\n    dateRange: dateRange,\r\n    pType: pType,\r\n    countries: countries,\r\n    miss: miss,\r\n    miss3: miss3,\r\n    match: match,\r\n    totalSubmission: totalSubmission,\r\n    useCum: useCum,\r\n    lookBack: lookBack,\r\n  });\r\n}\r\n\r\nexport function getCombinedLineData(\r\n  toPlot,\r\n  primers,\r\n  dateRange,\r\n  pType,\r\n  countries,\r\n  miss,\r\n  miss3,\r\n  match,\r\n  totalSubmission,\r\n  useCum,\r\n  lookBack\r\n) {\r\n  return buildLineGraphData({\r\n    toPlot: toPlot,\r\n    primers: primers,\r\n    dateRange: dateRange,\r\n    pType: pType,\r\n    countries: countries,\r\n    miss: miss,\r\n    miss3: miss3,\r\n    match: match,\r\n    totalSubmission: totalSubmission,\r\n    useCum: useCum,\r\n    lookBack: lookBack,\r\n  });\r\n}\r\n\r\nexport function makeBarData({\r\n  data,\r\n  dbDaily,\r\n  countries,\r\n  countryAsTotal,\r\n  dates,\r\n  useCum,\r\n  timeFrameBrush,\r\n  daysBetweenComparison,\r\n  numberOfBars,\r\n}) {\r\n  /**\r\n   * Makes the bar data to be used for display\r\n   * @param {Array} graphBase: List of List of Map containing \"date\", \"name\", \"mutation_pct\", \"mutation3_pct\", \"mutation_abs\", \"mutation3_abs\", \"submission_count\", and  \"countries_considered\". Each list correspond to a primer in primerNames of the same index\r\n   * @param {Array} primerNames: Contains the list primer names\r\n   * @param {Object} dbCount: Contains the virus numbers in date -> country -> count order\r\n   * @param {Array} timeFrameBrush: Contains the minimum and maximum date of interest\r\n   * @returns {Array} Contains a List of List. Each list corresponds to a particular primer\r\n   */\r\n  function getDb(db, dateRange, startDate, endDate) {\r\n    function addObject(obj1, obj2) {\r\n      const toReturn = { ...obj1 };\r\n      for (const key of Object.keys(obj2)) {\r\n        toReturn[key] = obj2[key] + (obj1[key] || 0);\r\n      }\r\n      return toReturn;\r\n    }\r\n\r\n    const result = {};\r\n    result[endDate] = {};\r\n    for (const date of dateRange) {\r\n      if (date >= startDate && date <= endDate) {\r\n        result[endDate] = addObject(result[endDate], db[date]);\r\n      }\r\n    }\r\n    result[endDate] = countryAsTotal\r\n      ? getCountriesTotal(result, countries, endDate)\r\n      : result[endDate].total;\r\n    return result;\r\n  }\r\n\r\n  if (useCum) {\r\n    let now = timeFrameBrush[1] || dates[dates.length - 1];\r\n    const start = timeFrameBrush[0] || dates[0];\r\n    const endDate = new Date(now);\r\n    now = endDate.toISOString().slice(0, 10);\r\n    const startDate = new Date(start);\r\n    let Difference_In_Time = endDate.getTime() - startDate.getTime();\r\n    // To calculate the no. of days between two dates\r\n    let differenceInDays = Difference_In_Time / (1000 * 3600 * 24);\r\n    const currDb = getDb(\r\n      dbDaily,\r\n      dates,\r\n      startDate.toISOString().slice(0, 10),\r\n      now\r\n    );\r\n    // TODO: Account for scenario where the same primer but different regions have mutations\r\n    const barData = data.reduce((result, currVal) => {\r\n      if (result[0].has(currVal.primer)) {\r\n        // TODO Change to account for map to set\r\n        result[1].add(currVal.virus_name);\r\n        if (currVal.misses3 === 0) {\r\n          result[2].add(currVal.virus_name);\r\n        }\r\n        return result[0].set(currVal.primer, {\r\n          ...result[0].get(currVal.primer),\r\n          mutation3_abs:\r\n            result[0].get(currVal.primer).mutation3_abs +\r\n            (currVal.misses3 === 0 ? 0 : 1),\r\n          mutation3_pct:\r\n            ((result[0].get(currVal.primer).mutation3_abs +\r\n              (currVal.misses3 === 0 ? 0 : 1)) /\r\n              currDb[now]) *\r\n            100,\r\n          mutation_abs: result[0].get(currVal.primer).mutation_abs + 1,\r\n          mutation_pct:\r\n            ((result[0].get(currVal.primer).mutation_abs + 1) / currDb[now]) *\r\n            100,\r\n        });\r\n      } else {\r\n        return result[0].set(currVal.primer, {\r\n          name: currVal.primer,\r\n          date: now,\r\n          countries_considered: countries,\r\n          lookBack: differenceInDays,\r\n          submission_count: currDb[now],\r\n          mutation3_abs: currVal.misses3 === 0 ? 0 : 1,\r\n          mutation3_pct: ((currVal.misses3 === 0 ? 0 : 1) / currDb[now]) * 100,\r\n          mutation_abs: 1,\r\n          mutation_pct: (1 / currDb[now]) * 100,\r\n        });\r\n      }\r\n    }, [new Map(), new Map(), new Map()]());\r\n    return [[], [...barData.values()]];\r\n  } else {\r\n    // TODO (EB): THIS IS NOT WORKING. The additional features for bar graph.\r\n    // const now = timeFrameBrush[1] || new Date(dates[dates.length - 1]);\r\n    // const start = new Date(now);\r\n    // start.setDate(start.getDate() - daysBetweenComparison * numberOfBars);\r\n    // while (start.getTime() < new Date(dates[0])) {\r\n    //   start.setDate(start.getDate() + daysBetweenComparison);\r\n    //   // setNumberOfBars((prev) => prev - 1);\r\n    // }\r\n    // for (\r\n    //   let d = start;\r\n    //   d <= now;\r\n    //   d.setDate(d.getDate() + daysBetweenComparison)\r\n    // ) {\r\n    //   const primerMutations = [];\r\n    //   for (let i = 0; i < graphOverview.length; i++) {\r\n    //     const details = graphOverview[i].filter(\r\n    //       (val) => val.date === d.toISOString().slice(0, 10)\r\n    //     );\r\n    //     primerMutations.push(...details);\r\n    //   }\r\n    //   dateDetails.push(primerMutations);\r\n    // }\r\n    // return dateDetails;\r\n  }\r\n}\r\n\r\nfunction findIntersection(list1, list2, key, intersect = true) {\r\n  /**\r\n   * Finds the intersection between two list\r\n   * @param {Bool} intersect: finds the intersection of [list1] and [list2] if true\r\n   *  otherwise, finds items in [list1] and not in [list2]\r\n   */\r\n\r\n  if (key) {\r\n    let result = list1.filter(\r\n      ((set) => (item) => {\r\n        return intersect === set.has(item[key]);\r\n      })(new Set(list2.map((item) => item[key])))\r\n    );\r\n    return result;\r\n  } else {\r\n    const result = list1.filter(\r\n      ((set) => (item) => {\r\n        return intersect === set.has(item);\r\n      })(new Set(list2.map((item) => item)))\r\n    );\r\n    return result;\r\n  }\r\n}\r\n\r\nfunction findListIntersection(itemList, numList, key = \"accession_id\") {\r\n  /**\r\n   * Finds the intersecting items within each list\r\n   * @param   {Array}  itemList: Contains lists which contain info to find intersection of.\r\n   * @param   {string} keys: Optional choice to specify if items in lists are objects\r\n   * @returns {Array} An array containing items which are common across all list.\r\n   */\r\n  // List only contains one list, so we return it\r\n  let intersection = itemList[0];\r\n  for (let i = 1; i < itemList.length; i++) {\r\n    intersection = findIntersection(intersection, itemList[i], key);\r\n  }\r\n  return intersection;\r\n}\r\n\r\nexport function makeIntersection(tableData, primerNames) {\r\n  /**\r\n   * Creates data for intersecting values if any\r\n   * @param {Array} tableData: contains the info on the primers to display\r\n   * @param {Array} primerNames: Contains the list of primer names\r\n   * @returns {Array}: List of virus that is missed by all primers\r\n   * @returns {string}: name of the combined primers\r\n   */\r\n  let intersection = [];\r\n  if (\r\n    primerNames.length === Object.values(tableData).length &&\r\n    primerNames.length > 1\r\n  ) {\r\n    const name = primerNames.join(\", \");\r\n    intersection = findListIntersection(\r\n      Object.values(tableData),\r\n      primerNames.length\r\n    );\r\n    intersection = intersection.map(addName(name));\r\n    return [intersection, [name]];\r\n  }\r\n  return [intersection, \"\"];\r\n}\r\n"],"sourceRoot":""}